import{h as p,Component as er,createContext as or,cloneElement as R}from"@dropins/tools/preact.js";import{useContext as C}from"@dropins/tools/preact-hooks.js";const xr=r=>r.reduce((e,n)=>{if(!n)return e;if(typeof n=="string"&&(e+=` ${n}`),Array.isArray(n)){const[a,i]=n;a&&i&&(e+=` ${a}`)}return e},"").trim();function G(r,t,e,n,a){for(t=t.split?t.split("."):t,n=0;n<t.length;n++)r=r?r[t[n]]:a;return r===a?e:r}var V,ar={};function u(r,t,e){if(r.nodeType===3){var n="textContent"in r?r.textContent:r.nodeValue||"";if(u.options.trim!==!1){var a=t===0||t===e.length-1;if((!(n=n.match(/^[\s\n]+$/g)&&u.options.trim!=="all"?" ":n.replace(/(^[\s\n]+|[\s\n]+$)/g,u.options.trim==="all"||a?"":" "))||n===" ")&&e.length>1&&a)return null}return n}if(r.nodeType!==1)return null;var i=String(r.nodeName).toLowerCase();if(i==="script"&&!u.options.allowScripts)return null;var o,l,s=u.h(i,function(m){var E=m&&m.length;if(!E)return null;for(var M={},k=0;k<E;k++){var d=m[k],O=d.name,T=d.value;O.substring(0,2)==="on"&&u.options.allowEvents&&(T=new Function(T)),M[O]=T}return M}(r.attributes),(l=(o=r.childNodes)&&Array.prototype.map.call(o,u).filter(ir))&&l.length?l:null);return u.visitor&&u.visitor(s),s}var Y,ir=function(r){return r},lr={};function z(r){var t=(r.type||"").toLowerCase(),e=z.map;e&&e.hasOwnProperty(t)?(r.type=e[t],r.props=Object.keys(r.props||{}).reduce(function(n,a){var i;return n[i=a,i.replace(/-(.)/g,function(o,l){return l.toUpperCase()})]=r.props[a],n},{})):r.type=t.replace(/[^a-z0-9-]/i,"")}const ur=function(r){function t(){r.apply(this,arguments)}return r&&(t.__proto__=r),(t.prototype=Object.create(r&&r.prototype)).constructor=t,t.setReviver=function(e){Y=e},t.prototype.shouldComponentUpdate=function(e){var n=this.props;return e.wrap!==n.wrap||e.type!==n.type||e.markup!==n.markup},t.prototype.setComponents=function(e){if(this.map={},e){for(var n in e)if(e.hasOwnProperty(n)){var a=n.replace(/([A-Z]+)([A-Z][a-z0-9])|([a-z0-9]+)([A-Z])/g,"$1$3-$2$4").toLowerCase();this.map[a]=e[n]}}},t.prototype.render=function(e){var n=e.wrap;n===void 0&&(n=!0);var a,i=e.type,o=e.markup,l=e.components,s=e.reviver,m=e.onError,E=e["allow-scripts"],M=e["allow-events"],k=e.trim,d=function(h,_){var j={};for(var w in h)Object.prototype.hasOwnProperty.call(h,w)&&_.indexOf(w)===-1&&(j[w]=h[w]);return j}(e,["wrap","type","markup","components","reviver","onError","allow-scripts","allow-events","trim"]),O=s||this.reviver||this.constructor.prototype.reviver||Y||p;this.setComponents(l);var T={allowScripts:E,allowEvents:M,trim:k};try{a=function(h,_,j,w,tr){var x=function(P,$){var v,I,N,F,nr=$==="html"?"text/html":"application/xml";$==="html"?(F="body",N=`<!DOCTYPE html>
<html><body>`+P+"</body></html>"):(F="xml",N=`<?xml version="1.0" encoding="UTF-8"?>
<xml>`+P+"</xml>");try{v=new DOMParser().parseFromString(N,nr)}catch(b){I=b}if(v||$!=="html"||((v=V||(V=function(){if(document.implementation&&document.implementation.createHTMLDocument)return document.implementation.createHTMLDocument("");var b=document.createElement("iframe");return b.style.cssText="position:absolute; left:0; top:-999em; width:1px; height:1px; overflow:hidden;",b.setAttribute("sandbox","allow-forms"),document.body.appendChild(b),b.contentWindow.document}())).open(),v.write(N),v.close()),v){var L=v.getElementsByTagName(F)[0],f=L.firstChild;return P&&!f&&(L.error="Document parse failed."),f&&String(f.nodeName).toLowerCase()==="parsererror"&&(f.removeChild(f.firstChild),f.removeChild(f.lastChild),L.error=f.textContent||f.nodeValue||I||"Unknown error",L.removeChild(f)),L}}(h,_);if(x&&x.error)throw new Error(x.error);var Z=x&&x.body||x;z.map=w||lr;var H=Z&&function(P,$,v,I){return u.visitor=$,u.h=v,u.options=I||ar,u(P)}(Z,z,j,tr);return z.map=null,H&&H.props&&H.props.children||null}(o,i,O,this.map,T)}catch(h){m?m({error:h}):typeof console<"u"&&console.error&&console.error("preact-markup: "+h)}if(n===!1)return a||null;var U=d.hasOwnProperty("className")?"className":"class",g=d[U];return g?g.splice?g.splice(0,0,"markup"):typeof g=="string"?d[U]+=" markup":typeof g=="object"&&(g.markup=!0):d[U]="markup",O("div",d,a||null)},t}(er);var y=or({intl:{}});function B(r){return r!=null}function W(r,t){for(var e in t)r[e]=t[e];return r}function q(r,t){var e=W({},r);for(var n in t)t.hasOwnProperty(n)&&(r[n]&&t[n]&&typeof r[n]=="object"&&typeof t[n]=="object"?e[n]=q(r[n],t[n]):e[n]=r[n]||t[n]);return e}function pr(r){if(r=r||{},typeof r=="string"&&(r=r.split(",")),"join"in r){for(var t={},e=0;e<r.length;e++){var n=r[e].trim();n&&(t[n.split(".").pop()]=n)}return t}return r}function sr(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)===-1&&(e[n]=r[n]);return e}var cr=/[?&#]intl=show/;function J(r){var t=r.scope,e=r.mark,n=r.definition,a=sr(r,["scope","mark","definition"]),i=a,o=C(y),l=o.intl,s=W({},l||{});return t&&(s.scope=t),n&&(s.dictionary=q(s.dictionary||{},n)),(e||typeof location<"u"&&String(location).match(cr))&&(s.mark=!0),p(y.Provider,{value:{intl:s}},i.children)}function c(r,t){if(arguments.length<2)return t=r,function(n){return c(n,t)};function e(n){return p(J,t||{},p(r,n))}return e.getWrappedComponent=r&&r.getWrappedComponent||function(){return r},e}var fr={};function K(r,t,e,n){return r&&r.replace(/\{\{([\w.-]+)\}\}/g,vr.bind(null,t||fr,e,n))}function vr(r,t,e,n,a){for(var i=a.split("."),o=r,l=0;l<i.length;l++){if(o=o[i[l]],o==null)return"";if(o&&o.type===D)return A(o.props.id,t,e,o.props.fields,o.props.plural,o.props.fallback)}return typeof o=="string"&&o.match(/\{\{/)&&(o=K(o,r)),o}function A(r,t,e,n,a,i){t&&(r=t+"."+r);var o=e&&G(e,r);return(a||a===0)&&o&&typeof o=="object"&&(o.splice?o=o[a]||o[0]:a===0&&B(o.none||o.zero)?o=o.none||o.zero:a===1&&B(o.one||o.singular)?o=o.one||o.singular:o=o.some||o.many||o.plural||o.other||o),o&&K(o,n,t,e)||i||null}function Q(r){var t=r.value,e=r.id,n=C(y),a=n.intl;if(a&&a.mark){var i="dictionary"+(a&&a.scope?"."+a.scope:"")+"."+e;return p("mark",{style:{background:t?G(a,i)?"rgba(119,231,117,.5)":"rgba(229,226,41,.5)":"rgba(228,147,51,.5)"},title:e},t)}return t}function D(r){var t=r.id,e=r.children,n=r.plural,a=r.fields,i=C(y),o=i.intl,l=A(t,o&&o.scope,o&&o.dictionary,a,n,e);return p(Q,{id:t,value:l})}function S(r,t,e){var n={};t=t||{},r=pr(r);for(var a in r)if(r.hasOwnProperty(a)&&r[a]){var i=r[a];!e&&typeof i=="string"?n[a]=A(i,t.scope,t.dictionary):i.type===D&&(i=W({fallback:i.props.children},i.props),n[a]=A(i.id,t.scope,t.dictionary,i.fields,i.plural,i.fallback))}return n}function X(r){var t=r.children,e=C(y),n=e.intl;return t&&t.length?t.map(function(a){return R(a,S(a.props,n,!0))}):t&&R(t,S(t.props,n,!0))}function rr(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)===-1&&(e[n]=r[n]);return e}function mr(r){var t=r.id,e=r.fields,n=r.plural,a=r.children,i=rr(r,["id","fields","plural","children"]),o=i;return p(X,null,p(dr,Object.assign({},{html:p(D,{id:t,fields:e,plural:n,children:a}),id:t},o)))}function dr(r){var t=r.html,e=r.id,n=rr(r,["html","id"]),a=n;return p(Q,{id:e,value:t&&(typeof t=="string"?p(ur,Object.assign({},{type:"html",trim:!1},a,{markup:t})):p("span",null,t))})}function hr(r){return function(e){function n(a,i){var o=C(y),l=o.intl,s=typeof r=="function"?r(a,{intl:l}):r,m=S(s,l);return p(e,W(W({},a),m))}return n.getWrappedComponent=e&&e.getWrappedComponent||function(){return e},n}}function yr(r){var t=C(y),e=t.intl;return S(typeof r=="function"?r({intl:e}):r,e)}c.intl=c;c.IntlContext=y;c.IntlProvider=J;c.Text=D;c.MarkupText=mr;c.Localizer=X;c.withText=hr;c.useText=yr;c.translate=A;export{y as I,X as L,mr as M,D as T,J as a,xr as c,yr as u};
//# sourceMappingURL=preact-i18n.esm.js.map
