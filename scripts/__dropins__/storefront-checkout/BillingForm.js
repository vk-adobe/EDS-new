import"@dropins/tools/event-bus.js";import{e as n}from"./transform-shipping-methods.js";import{u as c}from"./countries.js";import{i as A}from"./IsBillToShippingSignal.js";import{A as g}from"./estimateShippingMethods.js";import{s as F}from"./setBillingAddress.js";import{p as B}from"./setShippingAddress.js";import{A as h}from"./usePreselectedFields.js";import"@dropins/tools/preact-hooks.js";import{c as b}from"./BillToShippingAddress2.js";import{useRef as v,useCallback as m,useEffect as I}from"@dropins/tools/preact-compat.js";import{jsx as y}from"@dropins/tools/preact-jsx-runtime.js";import{B as k}from"./constants.js";const w=a=>{const{fields:o}=c(),i=v(null),{data:e}=n.value,d=(e==null?void 0:e.id)||"",{checked:r,setByUser:t}=A.value,p=!r,u=m(s=>F({signal:s.signal,cartId:d,input:{address:r?void 0:B(s.address),same_as_shipping:r}}),[d,r]),f=m(()=>{var l;const s=n.value.data;return!b(o,s==null?void 0:s.billingAddress,(l=s==null?void 0:s.shippingAddresses)==null?void 0:l[0])},[o]);return I(()=>{if(!t)return;const s=new AbortController;return r||i.current.triggerSaveAddress(s.signal),()=>{s.abort()}},[r,t]),y(h,{...a,addressType:g.BILLING,"data-testid":"billing-form",headingId:"Checkout.BillingAddress.title",name:k,ref:i,saveAddressHandler:u,shouldAutoFillForm:f,style:{display:p?"block":"none"}})};export{w as B};
//# sourceMappingURL=BillingForm.js.map
