{"version":3,"file":"CartSummary.js","sources":["../../ElsieSDK/packages/elsie/src/lib/resolve-image.ts","../src/lib/redirect.ts","../../ElsieSDK/packages/elsie/src/components/Incrementer/Incrementer.tsx","../../ElsieSDK/packages/elsie/src/components/Image/Image.tsx","../../ElsieSDK/packages/elsie/src/components/Accordion/Accordion.tsx","../../ElsieSDK/packages/elsie/src/components/CartItem/CartItem.tsx","../../ElsieSDK/packages/elsie/src/components/CartItem/CartItemSkeleton.tsx","../src/components/CartSummary/CartSummarySkeleton.tsx","../src/components/CartSummary/MobileCartSummarySkeleton.tsx","../src/components/CartSummary/CartSummary.tsx","../src/components/CartSummaryItem/CartSummaryItem.tsx","../src/containers/CartSummary/constants.ts","../src/containers/CartSummary/CartSummary.tsx"],"sourcesContent":["import { getImageParamsKeyMap } from '@adobe/elsie/lib/';\n\nconst BREAKPOINTS = {\n  medium: 768,\n  large: 1024,\n  xlarge: 1366,\n  xxlarge: 1920,\n};\n\nexport interface ResolveImageUrlOptions {\n  width: number;\n  height?: number;\n  auto?: string;\n  quality?: number;\n  crop?: boolean;\n  fit?: string;\n}\n\nconst resolveImageUrl = (url: string, _opts?: ResolveImageUrlOptions) => {\n  const [base, query] = url.split('?');\n  const params = new URLSearchParams(query);\n\n  const keyMapping = getImageParamsKeyMap();\n\n  let opts = {};\n\n  if (keyMapping && Object.keys(keyMapping).length > 0 && _opts) {\n    opts = Object.entries(_opts).reduce((acc, [key, value]) => {\n      const newKey = keyMapping[key];\n      if (newKey) {\n        acc[newKey] = value;\n      }\n      return acc;\n    }, {} as { [key: string]: any });\n  } else {\n    opts = {\n      auto: 'webp',\n      quality: 80,\n      crop: false,\n      fit: 'cover',\n      ..._opts,\n    };\n  }\n  // Append image optimization parameters\n  Object.entries(opts).forEach(([key, value]) => {\n    if (value !== undefined && value !== null) {\n      params.set(key, String(value));\n    }\n  });\n\n  return `${base}?${params.toString()}`;\n};\n\nexport const generateSrcset = (\n  imageURL: string,\n  options: ResolveImageUrlOptions\n) => {\n  if (!imageURL || !options?.width) return;\n\n  const generateSrcsetUrl = (options: ResolveImageUrlOptions) => {\n    return resolveImageUrl(imageURL, {\n      ...options,\n    });\n  };\n\n  return Object.entries(BREAKPOINTS)\n    .map(([, value]) => {\n      // calculate breakpoints width\n      const relativeWidth = (options.width * value) / BREAKPOINTS.xxlarge;\n\n      return `${generateSrcsetUrl({\n        ...options,\n        width: relativeWidth,\n      })} ${value}w`;\n    })\n    .join(',\\n');\n};\n","export function redirect(location: string): void {\n  window.location.href = location;\n}\n","import { FunctionComponent } from 'preact';\nimport { useState, useEffect, useCallback } from 'preact/hooks';\nimport { HTMLAttributes } from 'preact/compat';\nimport { classes, debounce } from '@adobe/elsie/lib';\nimport { Add, Minus } from '@adobe/elsie/icons';\nimport { Icon } from '@adobe/elsie/components/Icon';\nimport { Localizer, Text } from '@adobe/elsie/i18n';\nimport '@adobe/elsie/components/Incrementer/Incrementer.css';\n\nexport interface IncrementerProps\n  extends Omit<HTMLAttributes<HTMLInputElement>, 'size'> {\n  name?: string;\n  size?: 'medium' | 'large';\n  onValue?: (value: any) => void;\n  onUpdateError?: (error: Error) => void;\n  error?: boolean;\n  success?: boolean;\n  min?: number;\n  max?: number;\n  disabled?: boolean;\n  maxLength?: number;\n}\n\nexport const Incrementer: FunctionComponent<IncrementerProps> = ({\n  name,\n  value = '1',\n  className,\n  disabled,\n  error,\n  success,\n  min,\n  max,\n  onValue,\n  onUpdateError,\n  size = 'medium',\n  ...props\n}) => {\n  const [currentValue, setCurrentValue] = useState<number>(Number(value));\n  const minValue = Number(min);\n  const maxValue = Number(max);\n\n  useEffect(() => {\n    setCurrentValue(Number(value));\n  }, [value]);\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const debouncedOnValueHandler = useCallback(\n    debounce(async (newValue: any) => {\n      if (onValue) {\n        try {\n          await onValue(newValue);\n        } catch (e) {\n          if (onUpdateError) {\n            onUpdateError(e as Error);\n          }\n        }\n      }\n    }, 200),\n    [onValue, onUpdateError]\n  );\n\n  const handleIncrementer = (_value: number) => {\n    let newValue = _value;\n    if (_value < minValue) newValue = minValue;\n    if (_value > maxValue) newValue = maxValue;\n    debouncedOnValueHandler(newValue);\n    setCurrentValue(newValue);\n  };\n\n  return (\n    <div\n      className={classes([\n        'dropin-incrementer',\n        `dropin-incrementer--${size}`,\n        className,\n      ])}\n    >\n      <div\n        className={classes([\n          'dropin-incrementer__content',\n          `dropin-incrementer__content--${size}`,\n          [`dropin-incrementer__content--error`, error],\n          [`dropin-incrementer__content--success`, success],\n          [`dropin-incrementer__content--disabled`, disabled],\n        ])}\n      >\n        {/* Minus Button */}\n        <div\n          className={classes([\n            'dropin-incrementer__button-container',\n            [`dropin-incrementer__button-container--disabled`, disabled],\n          ])}\n        >\n          <Localizer>\n            <button\n              type=\"button\"\n              className={classes([\n                'dropin-incrementer__decrease-button',\n                [`dropin-incrementer__decrease-button--disabled`, disabled],\n              ])}\n              onClick={() => handleIncrementer(currentValue - 1)}\n              disabled={disabled || currentValue < minValue + 1}\n              aria-label={\n                (<Text id=\"Dropin.Incrementer.decreaseLabel\" />) as any\n              }\n            >\n              <Icon\n                source={Minus}\n                size=\"16\"\n                stroke=\"1\"\n                viewBox=\"4 2 20 20\"\n                className=\"dropin-incrementer__down\"\n              />\n            </button>\n          </Localizer>\n        </div>\n\n        {/* Input Field */}\n        <input\n          className=\"dropin-incrementer__input\"\n          max={max}\n          min={min}\n          step={1}\n          type=\"number\"\n          name={name}\n          value={currentValue}\n          disabled={disabled}\n          onChange={(e) => {\n            const newValue = e.currentTarget.value;\n            if (newValue !== '') {\n              handleIncrementer(Number(newValue));\n            }\n          }}\n          {...props}\n        />\n\n        <div\n          className={classes([\n            'dropin-incrementer__button-container',\n            [`dropin-incrementer__button-container--disabled`, disabled],\n          ])}\n        >\n          {/* Plus/Add button */}\n          <Localizer>\n            <button\n              type=\"button\"\n              className={classes([\n                'dropin-incrementer__increase-button',\n                [`dropin-incrementer__increase-button--disabled`, disabled],\n              ])}\n              onClick={() => handleIncrementer(currentValue + 1)}\n              disabled={disabled || currentValue > maxValue - 1}\n              aria-label={\n                (<Text id=\"Dropin.Incrementer.increaseLabel\" />) as any\n              }\n            >\n              <Icon\n                source={Add}\n                size=\"16\"\n                stroke=\"1\"\n                viewBox=\"4 2 20 20\"\n                className=\"dropin-incrementer__add\"\n              />\n            </button>\n          </Localizer>\n        </div>\n      </div>\n    </div>\n  );\n};\n","import { FunctionComponent } from 'preact';\nimport { HTMLAttributes, useMemo, useState } from 'preact/compat';\nimport {\n  classes,\n  generateSrcset,\n  ResolveImageUrlOptions,\n} from '@adobe/elsie/lib';\nimport '@adobe/elsie/components/Image/Image.css';\n\nexport interface ImageProps extends HTMLAttributes<HTMLDivElement> {\n  params?: ResolveImageUrlOptions;\n  src: string;\n  onLoad?: (e: any) => void;\n}\nexport const Image: FunctionComponent<ImageProps> = ({\n  className,\n  src,\n  params,\n  loading = 'lazy',\n  srcSet,\n  onLoad,\n  ...props\n}) => {\n  const [loaded, setLoaded] = useState(false);\n\n  const _srcSet = useMemo(() => {\n    // If srcSet is provided, use it\n    if (srcSet) return srcSet;\n\n    // If src is not provided, return \"undefined\"\n    if (!src || !params) return;\n\n    // Otherwise, generate srcSet based on params\n    return generateSrcset(src, { ...params });\n  }, [params, src, srcSet]);\n\n  // Add class at image onLoad\n  const onLoadHandler = (e: any) => {\n    setLoaded(true);    \n    onLoad?.(e);\n  };\n\n  return (\n    <img\n      {...props}\n      className={classes([\n        'dropin-image',\n        ['dropin-image--loaded', loaded],\n        className,\n      ])}\n      loading={loading}\n      onLoad={onLoadHandler}\n      src={src}\n      srcSet={_srcSet}\n    />\n  );\n};\n","import { FunctionComponent, VNode } from 'preact';\nimport { HTMLAttributes, useState } from 'preact/compat';\nimport { classes } from '@adobe/elsie/lib';\nimport { Divider, Icon } from '@adobe/elsie/components';\nimport { Add, Minus } from '@adobe/elsie/icons';\nimport { useText } from '@adobe/elsie/i18n';\nimport '@adobe/elsie/components/Accordion/Accordion.css';\nexport interface AccordionSectionProps\n  extends Omit<HTMLAttributes<HTMLDivElement>, 'icon'> {\n  actionIconPosition?: 'left' | 'right';\n  iconOpen?: VNode<HTMLAttributes<SVGSVGElement>>;\n  iconClose?: VNode<HTMLAttributes<SVGSVGElement>>;\n  iconLeft?: VNode<HTMLAttributes<SVGSVGElement>>;\n  showIconLeft?: boolean;\n  secondaryText?: string | VNode<HTMLAttributes<HTMLSpanElement>>;\n  renderContentWhenClosed?: boolean;\n  onStateChange?: (open: boolean) => void;\n}\n\nexport const AccordionSection: FunctionComponent<AccordionSectionProps> = ({\n  className,\n  children,\n  title,\n  secondaryText,\n  actionIconPosition = 'left',\n  iconOpen = Add,\n  iconClose = Minus,\n  iconLeft = Add,\n  showIconLeft = false,\n  renderContentWhenClosed = true,\n  onStateChange,\n  ...props\n}) => {\n  const [open, setOpen] = useState<boolean>(false);\n  const onClickHandler = (e: { stopImmediatePropagation: () => void }) => {\n    e.stopImmediatePropagation();\n\n    const next = !open;\n    setOpen(next);\n    onStateChange?.(next);\n  };\n\n  const buttonLabel = useText(\n    `Dropin.Accordion.${open ? 'close' : 'open'}.label`\n  ).label;\n\n  const openIcon = (\n    <Icon\n      source={iconOpen}\n      size=\"24\"\n      onClick={onClickHandler}\n      onKeyPress={onClickHandler}\n      className={'dropin-accordion-section__open-icon'}\n    />\n  );\n\n  const closeIcon = (\n    <Icon\n      source={iconClose}\n      size=\"24\"\n      onClick={onClickHandler}\n      onKeyPress={onClickHandler}\n      className={'dropin-accordion-section__close-icon'}\n    />\n  );\n\n  const leftIcon = <Icon source={iconLeft} size=\"24\" />;\n\n  return (\n    <div\n      {...props}\n      className={classes(['dropin-accordion-section', className])}\n    >\n      <div className={'dropin-accordion-section__heading'}>\n        <div\n          className={'dropin-accordion-section__flex'}\n          onClick={onClickHandler}\n          onKeyPress={onClickHandler}\n          role=\"button\"\n          aria-label={`${buttonLabel} ${title}`}\n          tabIndex={0}\n        >\n          <div className={'dropin-accordion-section__title-container'}>\n            {actionIconPosition === 'left' && (open ? closeIcon : openIcon)}\n\n            {showIconLeft && leftIcon}\n\n            <h3 className={'dropin-accordion-section__title'}>{title}</h3>\n          </div>\n        </div>\n\n        <div className={'dropin-accordion-section__secondary-text-container'}>\n          {secondaryText && (\n            <h4 className={'dropin-accordion-section__secondary-text'}>\n              {secondaryText}\n            </h4>\n          )}\n\n          {actionIconPosition === 'right' && (open ? closeIcon : openIcon)}\n        </div>\n      </div>\n\n      <div\n        className={'dropin-accordion-section__content-container'}\n        style={{ display: open ? 'grid' : 'none' }}\n      >\n        {(open || (renderContentWhenClosed && !open)) && children}\n      </div>\n    </div>\n  );\n};\n\nexport interface AccordionProps\n  extends Omit<HTMLAttributes<HTMLDivElement>, 'icon'> {\n  actionIconPosition?: 'left' | 'right';\n  iconOpen?: VNode<HTMLAttributes<SVGSVGElement>>;\n  iconClose?: VNode<HTMLAttributes<SVGSVGElement>>;\n  iconLeft?: VNode<HTMLAttributes<SVGSVGElement>>;\n  showIconLeft?: boolean;\n  secondaryText?: string | VNode<HTMLAttributes<HTMLSpanElement>>;\n  children: VNode<AccordionSectionProps>[] | VNode<AccordionSectionProps>;\n}\n\nexport const Accordion: FunctionComponent<AccordionProps> = ({\n  className,\n  children,\n  actionIconPosition = 'left',\n  iconOpen = Add,\n  iconClose = Minus,\n  ...props\n}) => {\n  const divider = <Divider variant=\"secondary\" />;\n\n  const renderAccordionSection = (child: VNode<AccordionSectionProps>) => (\n    <>\n      <AccordionSection\n        {...child.props}\n        actionIconPosition={actionIconPosition}\n        iconOpen={iconOpen}\n        iconClose={iconClose}\n      />\n      {divider}\n    </>\n  );\n\n  return (\n    <div {...props} className={classes(['dropin-accordion', className])}>\n      {[\n        divider,\n        ...(\n          (Array.isArray(children)\n            ? children\n            : [children]) as VNode<AccordionSectionProps>[]\n        ).map(renderAccordionSection),\n      ]}\n    </div>\n  );\n};\n","import { FunctionComponent, VNode } from 'preact';\nimport { HTMLAttributes, useContext } from 'preact/compat';\nimport { classes, VComponent } from '@adobe/elsie/lib';\nimport {\n  Button,\n  CartItemSkeleton,\n  Icon,\n  Incrementer,\n  UIContext,\n  ProgressSpinner,\n} from '@adobe/elsie/components';\nimport { useText } from '@adobe/elsie/i18n';\nimport { Trash } from '@adobe/elsie/icons';\n\nimport '@adobe/elsie/components/CartItem/CartItem.css';\n\nexport interface CartItemProps\n  extends Omit<HTMLAttributes<HTMLDivElement>, 'title' | 'loading'> {\n  ariaLabel?: string;\n  image: VNode;\n  title: VNode;\n  price: VNode;\n  taxIncluded?: boolean;\n  taxExcluded?: boolean;\n  total: VNode;\n  totalExcludingTax?: VNode;\n  sku: VNode;\n  quantity?: number;\n  description?: VNode;\n  configurations?: { [key: string]: any };\n  warning?: VNode;\n  alert?: VNode;\n  loading?: boolean;\n  updating?: boolean;\n  onRemove?: () => void;\n  onQuantity?: (value: number) => void;\n}\n\nexport const CartItem: FunctionComponent<CartItemProps> = ({\n  className,\n  children,\n  ariaLabel,\n  image,\n  title,\n  price,\n  taxIncluded = false,\n  taxExcluded = false,\n  total,\n  totalExcludingTax,\n  sku,\n  configurations,\n  warning,\n  alert,\n  quantity = 1,\n  description,\n  loading = false,\n  updating = false,\n  onQuantity,\n  onRemove,\n  ...props\n}) => {\n  const { locale } = useContext(UIContext);\n\n  const labels = useText({\n    each: 'Dropin.CartItem.each.label',\n    quantity: 'Dropin.CartItem.quantity.label',\n    remove: 'Dropin.CartItem.remove.label',\n    removeDefault: 'Dropin.CartItem.removeDefault.label',\n    taxIncluded: 'Dropin.CartItem.taxIncluded.label',\n    taxExcluded: 'Dropin.CartItem.taxExcluded.label',\n    updating: 'Dropin.CartItem.updating.label',\n    updatingDefault: 'Dropin.ProgressSpinner.updating.label',\n  });\n\n  if (loading) return <CartItemSkeleton />;\n\n  return (\n    <div\n      {...props}\n      className={classes([\n        'dropin-cart-item',\n        ['dropin-cart-item--updating', updating],\n        className,\n      ])}\n    >\n      {updating && (\n        <ProgressSpinner\n          className={classes(['dropin-cart-item__spinner'])}\n          ariaLabel={\n            ariaLabel\n              ? labels.updating?.replace('{product}', ariaLabel)\n              : labels.updatingDefault\n          }\n        />\n      )}\n      <div className=\"dropin-cart-item__wrapper\">\n        {/* Image */}\n        <VComponent\n          node={image}\n          className={classes(['dropin-cart-item__image'])}\n        />\n\n        {/* Title */}\n        <VComponent\n          node={title}\n          className={classes([\n            'dropin-cart-item__title',\n            ['dropin-cart-item__title--edit', !!onQuantity || !!onRemove],\n          ])}\n        />\n\n        {/* Description */}\n        {description && (\n          <VComponent\n            node={description}\n            className={classes(['dropin-cart-item__description'])}\n          />\n        )}\n\n        {/* SKU */}\n        <VComponent node={sku} className={classes(['dropin-cart-item__sku'])} />\n        {/* Configurations */}\n        {configurations && (\n          <ul className={classes(['dropin-cart-item__configurations'])}>\n            {Object.entries(configurations).map(([key, value]) => (\n              <li\n                key={key}\n                className={classes(['dropin-cart-item__configurations__item'])}\n              >\n                {key}:{' '}\n                <strong\n                  className={classes([\n                    'dropin-cart-item__configurations__item__value',\n                  ])}\n                >\n                  {value}\n                </strong>\n              </li>\n            ))}\n          </ul>\n        )}\n\n        {/* Price */}\n        <span className={classes(['dropin-cart-item__price'])}>\n          {!onQuantity && (\n            <span className=\"dropin-cart-item__price__quantity\">\n              {quantity.toLocaleString(locale)} x{' '}\n            </span>\n          )}\n\n          <VComponent node={price} role=\"text\" />\n\n          {quantity > 1 && (\n            <>\n              &nbsp;\n              {labels.each}\n            </>\n          )}\n\n          {taxIncluded && (\n            <span\n              data-testid=\"tax-message\"\n              className=\"dropin-cart-item__price-tax-message\"\n            >\n              &nbsp;\n              {labels.taxIncluded}\n            </span>\n          )}\n\n          {taxExcluded && (\n            <span\n              data-testid=\"tax-message\"\n              className=\"dropin-cart-item__price-tax-message\"\n            >\n              &nbsp;\n              {labels.taxExcluded}\n            </span>\n          )}\n        </span>\n\n        {/* Quantity */}\n        <div\n          className={classes([\n            'dropin-cart-item__quantity',\n            ['dropin-cart-item__quantity--edit', !!onQuantity],\n          ])}\n        >\n          {onQuantity ? (\n            <Incrementer\n              className={classes(['dropin-cart-item__quantity__incrementer'])}\n              value={quantity}\n              min={1}\n              onValue={(value) => onQuantity?.(Number(value))}\n              name=\"quantity\"\n              aria-label={labels.quantity}\n              disabled={updating}\n            />\n          ) : (\n            <span className={classes(['dropin-cart-item__quantity__value'])}>\n              {labels.quantity}:{' '}\n              <strong className=\"dropin-cart-item__quantity__number\">\n                {Number(quantity).toLocaleString(locale)}\n              </strong>\n            </span>\n          )}\n\n          {/* Warning */}\n          {warning && (\n            <VComponent\n              node={warning}\n              className={classes([\n                'dropin-cart-item__warning',\n                'dropin-cart-item__warning--quantity',\n              ])}\n            />\n          )}\n\n          {/* Alert */}\n          {alert && (\n            <VComponent\n              node={alert}\n              className={classes([\n                'dropin-cart-item__alert',\n                'dropin-cart-item__alert--quantity',\n              ])}\n            />\n          )}\n        </div>\n\n        {/* Warning */}\n        {warning && (\n          <VComponent\n            node={warning}\n            className={classes(['dropin-cart-item__warning'])}\n          />\n        )}\n\n        {/* Alert */}\n        {alert && (\n          <VComponent\n            node={alert}\n            className={classes(['dropin-cart-item__alert'])}\n          />\n        )}\n\n        {/* Total */}\n        <div\n          className={classes([\n            'dropin-cart-item__total',\n            ['dropin-cart-item__total--edit', !!onRemove],\n          ])}\n        >\n          <div className=\"dropin-cart-item__row-total\">\n            <VComponent node={total} role=\"text\" />\n          </div>\n          {taxIncluded && (\n            <span\n              data-testid=\"tax-message\"\n              className={classes(['dropin-cart-item__total-tax-message'])}\n            >\n              &nbsp;\n              {labels.taxIncluded}\n            </span>\n          )}\n\n          {taxExcluded && (\n            <div className=\"dropin-cart-item__total-tax-excluded\">\n              <span\n                data-testid=\"tax-message\"\n                className={classes([\n                  'dropin-cart-item__total-tax-excluded-message',\n                ])}\n              >\n                {totalExcludingTax && (\n                  <VComponent node={totalExcludingTax} role=\"text\" />\n                )}\n                &nbsp;\n                {labels.taxExcluded}\n              </span>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Remove Item */}\n      {onRemove && (\n        <Button\n          className={classes(['dropin-cart-item__remove'])}\n          variant=\"tertiary\"\n          onClick={() => onRemove?.()}\n          icon={\n            <Icon\n              source={Trash}\n              size=\"24\"\n              stroke=\"2\"\n              viewBox=\"0 0 24 24\"\n              aria-label={\n                ariaLabel\n                  ? labels.remove?.replace('{product}', ariaLabel)\n                  : labels.removeDefault\n              }\n            />\n          }\n          disabled={updating}\n        />\n      )}\n    </div>\n  );\n};\n","import { FunctionComponent } from 'preact';\nimport { Skeleton, SkeletonRow } from '@adobe/elsie/components';\n\nexport const CartItemSkeleton: FunctionComponent = () => {\n  return (\n    <div className=\"dropin-cart-item dropin-cart-item-skeleton\">\n      <Skeleton className=\"dropin-cart-item__skeleton dropin-cart-item__wrapper\">\n        <div className=\"dropin-cart-item__image\">\n          <SkeletonRow className=\"dropin-cart-item__skeleton__item\" />\n        </div>\n        <div className=\"dropin-cart-item__title\">\n          <SkeletonRow className=\"dropin-cart-item__skeleton__item\" />\n        </div>\n        <div className=\"dropin-cart-item__sku\">\n          <SkeletonRow className=\"dropin-cart-item__skeleton__item\" />\n        </div>\n        <div className=\"dropin-cart-item__price\">\n          <SkeletonRow className=\"dropin-cart-item__skeleton__item\" />\n        </div>\n        <div className=\"dropin-cart-item__quantity\">\n          <SkeletonRow className=\"dropin-cart-item__skeleton__item\" />\n        </div>\n        <div className=\"dropin-cart-item__total\">\n          <SkeletonRow className=\"dropin-cart-item__skeleton__item\" />\n        </div>\n      </Skeleton>\n    </div>\n  );\n};\n","import { CartItemSkeleton } from '@adobe/elsie/components/CartItem/CartItemSkeleton';\nimport { FunctionComponent } from 'preact';\nimport { Card, Skeleton, SkeletonRow } from '@adobe/elsie/components';\n\nexport const CartSummarySkeleton: FunctionComponent = () => {\n  return (\n    <Card>\n      <Skeleton\n        data-testid=\"cart-summary-skeleton\"\n        className=\"checkout-cart-summary-skeleton\"\n        style={{ gridTemplateColumns: '1fr' }}\n      >\n        <SkeletonRow variant=\"heading\" fullWidth={true} size=\"medium\" />\n        <CartItemSkeleton />\n        <CartItemSkeleton />\n        <CartItemSkeleton />\n        <CartItemSkeleton />\n        <CartItemSkeleton />\n        <SkeletonRow size=\"medium\" fullWidth={true} />\n      </Skeleton>\n    </Card>\n  );\n};\n","import { FunctionComponent } from 'preact';\nimport { Skeleton, SkeletonRow } from '@adobe/elsie/components';\n\nexport const MobileCartSummarySkeleton: FunctionComponent = () => {\n  return (\n    <Skeleton\n      data-testid=\"cart-summary-skeleton\"\n      className=\"checkout-mobile-cart-summary-skeleton\"\n      style={{ gridTemplateColumns: '1fr' }}\n    >\n      <SkeletonRow fullWidth={true} size=\"xlarge\" />\n    </Skeleton>\n  );\n};\n","import { FunctionComponent, VNode } from 'preact';\nimport { HTMLAttributes } from 'preact/compat';\nimport { classes } from '@adobe/elsie/lib';\nimport '@/checkout/components/CartSummary/CartSummary.css';\nimport {\n  Accordion,\n  AccordionSection,\n  Card,\n  Divider,\n} from '@adobe/elsie/components';\nimport { Text, useText } from '@adobe/elsie/i18n';\nimport { CartSummaryItem, Heading } from '@/checkout/components';\nimport { CartSummarySkeleton } from '@/checkout/components/CartSummary/CartSummarySkeleton';\nimport { MobileCartSummarySkeleton } from '@/checkout/components/CartSummary/MobileCartSummarySkeleton';\nimport { useBreakpoint } from '@/checkout/hooks/useBreakpoint';\nimport { Item } from '@/checkout/data/models';\n\nexport type CartSummaryActionProps = {\n  type: 'view-more' | 'view-all';\n  onClick: () => void;\n};\n\nexport interface CartSummaryProps\n  extends Omit<HTMLAttributes<HTMLDivElement>, 'action'> {\n  action?: VNode<CartSummaryActionProps>;\n  taxIncluded: boolean;\n  isLoading: boolean;\n  items: Item[];\n  routeCart?: () => string;\n  totalQuantity: number;\n}\n\nexport const CartSummaryAction: FunctionComponent<CartSummaryActionProps> = ({\n  type,\n  onClick,\n  children,\n}) => {\n  return (\n    <>\n      <Divider\n        className=\"checkout-cart-summary__divider-bottom\"\n        variant=\"primary\"\n      />\n      <button\n        data-testid={`action-${type}`}\n        className=\"checkout-cart-summary__action\"\n        onClick={onClick}\n      >\n        {children}\n      </button>\n    </>\n  );\n};\n\nconst Mobile: FunctionComponent<CartSummaryProps> = ({\n  title,\n  isLoading,\n  totalQuantity,\n  routeCart,\n  items,\n  taxIncluded,\n  action,\n}) => {\n  return (\n    <>\n      {isLoading ? (\n        <MobileCartSummarySkeleton />\n      ) : (\n        <Accordion actionIconPosition=\"left\">\n          <AccordionSection\n            title={`${title} (${totalQuantity})`}\n            secondaryText={\n              routeCart?.() && (\n                <a href={routeCart?.()} rel=\"noreferrer\">\n                  <Text id=\"Checkout.CartSummary.editCart\" />\n                </a>\n              )\n            }\n          >\n            {items?.map((item) => (\n              <CartSummaryItem\n                key={item?.uid}\n                item={item}\n                taxIncluded={taxIncluded}\n              />\n            ))}\n\n            {action}\n          </AccordionSection>\n        </Accordion>\n      )}\n    </>\n  );\n};\n\nconst Desktop: FunctionComponent<CartSummaryProps> = ({\n  title,\n  isLoading,\n  totalQuantity,\n  routeCart,\n  items,\n  action,\n  taxIncluded,\n}) => {\n  return (\n    <>\n      {isLoading ? (\n        <CartSummarySkeleton />\n      ) : (\n        <Card>\n          <div className=\"checkout-cart-summary__heading\">\n            <Heading level={2} className=\"checkout-cart-summary__title\">\n              {title} ({totalQuantity})\n            </Heading>\n\n            {routeCart?.() && (\n              <a\n                className=\"checkout-cart-summary__edit\"\n                href={routeCart?.()}\n                rel=\"noreferrer\"\n              >\n                <Text id=\"Checkout.CartSummary.editCart\" />\n              </a>\n            )}\n          </div>\n\n          <Divider\n            className=\"checkout-cart-summary__divider-top\"\n            variant=\"primary\"\n          />\n\n          <div className=\"checkout-cart-summary__items\">\n            {items?.map((item) => (\n              <CartSummaryItem\n                key={item?.uid}\n                item={item}\n                taxIncluded={taxIncluded}\n              />\n            ))}\n          </div>\n\n          {action}\n        </Card>\n      )}\n    </>\n  );\n};\n\nexport const CartSummary: FunctionComponent<CartSummaryProps> = ({\n  className,\n  ...props\n}) => {\n  const title = useText('Checkout.CartSummary.title').title;\n  const breakpoint = useBreakpoint();\n\n  return (\n    <div className={classes(['checkout-cart-summary', className])}>\n      {breakpoint === 'small' ? (\n        <Mobile title={title} {...props} />\n      ) : (\n        <Desktop title={title} {...props} />\n      )}\n    </div>\n  );\n};\n","import { FunctionComponent } from 'preact';\nimport { HTMLAttributes } from 'preact/compat';\nimport { classes } from '@adobe/elsie/lib';\nimport '@/checkout/components/CartSummaryItem/CartSummaryItem.css';\nimport { WarningWithCircle } from '@adobe/elsie/icons';\nimport { CartItem, Icon, Image, Price } from '@adobe/elsie/components';\nimport { Item, StockStatus } from '@/checkout/data/models';\nimport { useText, Text } from '@adobe/elsie/i18n';\n\nexport interface CartSummaryItemProps extends HTMLAttributes<HTMLDivElement> {\n  item: Item;\n  taxIncluded?: boolean;\n}\n\nexport const CartSummaryItem: FunctionComponent<CartSummaryItemProps> = ({\n  className,\n  item,\n  taxIncluded = false,\n}) => {\n  const translations = useText({\n    Sender: 'Checkout.CartSummary.GiftCard.sender',\n    Recipient: 'Checkout.CartSummary.GiftCard.recipient',\n    Message: 'Checkout.CartSummary.GiftCard.message',\n    Download: 'Checkout.CartSummary.Downloadable.download',\n    OutOfStockAlert: 'Checkout.OutOfStock.alert',\n    ...('links' in item && item.links\n      ? {\n          Files: (\n            <Text\n              id=\"Checkout.CartSummary.Downloadable.files\"\n              plural={item.links.length}\n              fields={{\n                count: item.links.length,\n              }}\n            />\n          ),\n        }\n      : {}),\n  });\n\n  // Taking advantage of using withText() to build the string literal for translations.Files\n  // https://github.com/synacor/preact-i18n/tree/2.3.1-preactx?tab=readme-ov-file#examples-4\n\n  let price = item.regularPrice;\n  let total = item.total;\n\n  if (taxIncluded) {\n    price = item.priceInclTax;\n    total = item.totalInclTax;\n  }\n\n  const configurations = {\n    ...('customizableOptions' in item ? item.customizableOptions : {}),\n    ...('configurableOptions' in item ? item.configurableOptions : {}),\n    ...('links' in item && item.links\n      ? { [translations.Files]: item.links.join(', ') }\n      : {}),\n    ...('senderName' in item && item.senderName\n      ? { [translations.Sender]: item.senderName }\n      : {}),\n    ...('recipientName' in item && item.recipientName\n      ? { [translations.Recipient]: item.recipientName }\n      : {}),\n    ...('senderEmail' in item &&\n    'senderName' in item &&\n    item.senderName &&\n    item.senderEmail\n      ? { [translations.Sender]: `${item.senderName} (${item.senderEmail})` }\n      : {}),\n    ...('recipientEmail' in item &&\n    'recipientName' in item &&\n    item.recipientName &&\n    item.recipientEmail\n      ? {\n          [translations.Recipient]: `${item.recipientName} (${item.recipientEmail})`,\n        }\n      : {}),\n    ...('message' in item && item.message && item.message != ''\n      ? { [translations.Message]: truncateMessage(item.message as string, 60) }\n      : {}),\n  };\n\n  function truncateMessage(message: string, limit: number) {\n    if (message.length > limit) {\n      return `${message.slice(0, limit)}...`;\n    }\n    return message;\n  }\n\n  const alert =\n    item.stockStatus === StockStatus.OutOfStock ? (\n      <span data-testid=\"checkout-cart-item-alert\">\n        <Icon source={WarningWithCircle} size=\"16\" />\n        {translations.OutOfStockAlert}\n      </span>\n    ) : undefined;\n\n  const lowInventory =\n    !alert && item.onlyXLeftInStock ? (\n      <span data-testid=\"checkout-cart-item-low-inventory\">\n        <Icon source={WarningWithCircle} size=\"16\" />\n        <Text\n          id=\"Checkout.OutOfStock.lowInventory\"\n          plural={item.onlyXLeftInStock}\n          fields={{\n            count: item.onlyXLeftInStock,\n          }}\n        />\n      </span>\n    ) : undefined;\n\n  return (\n    <div className={classes(['checkout-cart-summary-item', className])}>\n      <CartItem\n        data-testid=\"cart-summary-item\"\n        key={item.uid}\n        taxIncluded={taxIncluded}\n        title={<div data-testid=\"product-name\">{item.name}</div>}\n        sku={<div>{item.sku}</div>}\n        quantity={item.quantity}\n        image={\n          <Image\n            src={item.image?.src ?? ''}\n            alt={item.image?.alt}\n            loading=\"lazy\"\n            width=\"80\"\n            height=\"80\"\n            params={{ width: 80 }}\n          />\n        }\n        warning={lowInventory}\n        alert={alert}\n        configurations={configurations}\n        price={\n          <Price\n            amount={item.regularPrice.value}\n            currency={price.currency}\n            weight=\"normal\"\n          />\n        }\n        total={\n          <>\n            <Price\n              amount={item.regularPrice.value * item.quantity}\n              currency={price.currency}\n              variant={item.discounted ? 'strikethrough' : 'default'}\n            />\n\n            {item.discounted && (\n              <Price amount={total.value} currency={total.currency} sale />\n            )}\n          </>\n        }\n      />\n    </div>\n  );\n};\n","export const DEFAULT_VISIBLE_ITEMS = 5;\n","import {\n  CartSummaryAction,\n  CartSummary as CartSummaryComponent,\n} from '@/checkout/components/CartSummary/CartSummary';\nimport { DEFAULT_VISIBLE_ITEMS } from '@/checkout/containers/CartSummary/constants';\nimport { useStore } from '@/checkout/context/store';\nimport { Item, PriceDisplay, TotalDisplay } from '@/checkout/data/models';\nimport { redirect } from '@/checkout/lib';\nimport { cartSignal } from '@/checkout/signals';\nimport { useText } from '@adobe/elsie/i18n';\nimport { Container } from '@adobe/elsie/lib';\nimport { HTMLAttributes, useCallback, useMemo, useState } from 'preact/compat';\n\nexport interface CartSummaryProps extends HTMLAttributes<HTMLDivElement> {\n  routeCart?: () => string;\n}\n\ntype CartSummaryState = {\n  canDisplayMoreItems: boolean;\n  hasHiddenItems: boolean;\n  isLoading: boolean;\n  isTaxIncluded: boolean;\n  totalQuantity: number;\n  visibleItems: Item[];\n};\n\nconst initialState: CartSummaryState = {\n  canDisplayMoreItems: false,\n  hasHiddenItems: false,\n  isLoading: true,\n  isTaxIncluded: false,\n  totalQuantity: 0,\n  visibleItems: [],\n};\n\nexport function useCartSummary(displayMaxItems: boolean): CartSummaryState {\n  const { config } = useStore();\n  const isLoadingStoreConfig = config === undefined;\n\n  const cartData = cartSignal.value.data;\n  const isLoadingCartData = cartData === undefined;\n\n  if (isLoadingStoreConfig || isLoadingCartData) return initialState;\n\n  const { cartSummaryMaxItems, cartSummaryTotalDisplay, taxCartDisplay } =\n    config;\n\n  const useQtys = cartSummaryTotalDisplay === TotalDisplay.Quantity;\n  const isTaxIncluded =\n    taxCartDisplay.shoppingCartDisplayPrice === PriceDisplay.IncludingTax;\n\n  const { items, totalQty } = cartData;\n  const totalQuantity = useQtys ? totalQty : items.length;\n\n  const numOfVisibleItems = displayMaxItems\n    ? cartSummaryMaxItems\n    : Math.min(cartSummaryMaxItems, DEFAULT_VISIBLE_ITEMS);\n\n  const hasHiddenItems = items.length > numOfVisibleItems;\n  const visibleItems = items.slice(0, numOfVisibleItems);\n\n  const canDisplayMoreItems =\n    hasHiddenItems &&\n    !displayMaxItems &&\n    numOfVisibleItems != cartSummaryMaxItems;\n\n  return {\n    canDisplayMoreItems,\n    hasHiddenItems,\n    isLoading: false,\n    isTaxIncluded,\n    totalQuantity,\n    visibleItems,\n  };\n}\n\nexport const CartSummary: Container<CartSummaryProps> = ({\n  routeCart,\n  ...props\n}) => {\n  const [displayMaxItems, setDisplayMaxItems] = useState<boolean>(false);\n\n  const translations = useText({\n    ViewAll: 'Checkout.CartSummary.viewAll',\n    ViewMore: 'Checkout.CartSummary.viewMore',\n  });\n\n  const {\n    canDisplayMoreItems,\n    hasHiddenItems,\n    isLoading,\n    isTaxIncluded,\n    visibleItems,\n    totalQuantity,\n  } = useCartSummary(displayMaxItems);\n\n  const viewMaxItems = useCallback(() => {\n    setDisplayMaxItems(true);\n  }, []);\n\n  const viewAllItems = useCallback(() => {\n    if (!routeCart) return;\n    redirect(routeCart());\n  }, [routeCart]);\n\n  const action = useMemo(() => {\n    if (!hasHiddenItems) return;\n\n    if (canDisplayMoreItems) {\n      return (\n        <CartSummaryAction type=\"view-more\" onClick={viewMaxItems}>\n          {translations.ViewMore}\n        </CartSummaryAction>\n      );\n    }\n\n    if (routeCart) {\n      return (\n        <CartSummaryAction type=\"view-all\" onClick={viewAllItems}>\n          {translations.ViewAll}\n        </CartSummaryAction>\n      );\n    }\n  }, [\n    hasHiddenItems,\n    canDisplayMoreItems,\n    viewMaxItems,\n    translations.ViewMore,\n    translations.ViewAll,\n    viewAllItems,\n    routeCart,\n  ]);\n\n  return (\n    <CartSummaryComponent\n      {...props}\n      action={action}\n      taxIncluded={isTaxIncluded}\n      isLoading={isLoading}\n      items={visibleItems}\n      routeCart={routeCart}\n      totalQuantity={totalQuantity}\n    />\n  );\n};\n"],"names":["BREAKPOINTS","medium","large","xlarge","xxlarge","resolveImageUrl","url","_opts","base","query","split","params","URLSearchParams","keyMapping","getImageParamsKeyMap","opts","Object","keys","length","entries","reduce","acc","key","value","newKey","auto","quality","crop","fit","forEach","set","String","toString","generateSrcset","imageURL","options","width","generateSrcsetUrl","map","relativeWidth","join","redirect","location","window","href","Incrementer","name","className","disabled","error","success","min","max","onValue","onUpdateError","size","props","currentValue","setCurrentValue","useState","Number","minValue","maxValue","useEffect","debouncedOnValueHandler","useCallback","debounce","newValue","e","handleIncrementer","_value","_jsx","classes","children","_jsxs","Localizer","type","onClick","Text","id","Icon","source","Minus","stroke","viewBox","step","onChange","currentTarget","Add","Image","src","loading","srcSet","onLoad","loaded","setLoaded","_srcSet","useMemo","onLoadHandler","AccordionSection","title","secondaryText","actionIconPosition","iconOpen","iconClose","iconLeft","showIconLeft","renderContentWhenClosed","onStateChange","open","setOpen","onClickHandler","stopImmediatePropagation","next","buttonLabel","useText","label","openIcon","onKeyPress","closeIcon","leftIcon","role","tabIndex","style","display","Accordion","divider","Divider","variant","renderAccordionSection","child","_Fragment","Array","isArray","CartItem","ariaLabel","image","price","taxIncluded","taxExcluded","total","totalExcludingTax","sku","configurations","warning","alert","quantity","description","updating","onQuantity","onRemove","locale","useContext","UIContext","labels","each","remove","removeDefault","updatingDefault","CartItemSkeleton","ProgressSpinner","replace","VComponent","node","toLocaleString","Button","icon","Trash","Skeleton","SkeletonRow","CartSummarySkeleton","Card","gridTemplateColumns","fullWidth","MobileCartSummarySkeleton","CartSummaryAction","Mobile","isLoading","totalQuantity","routeCart","items","action","rel","item","CartSummaryItem","uid","Desktop","Heading","level","CartSummary","breakpoint","useBreakpoint","translations","Sender","Recipient","Message","Download","OutOfStockAlert","links","Files","plural","fields","count","regularPrice","priceInclTax","totalInclTax","customizableOptions","configurableOptions","senderName","recipientName","senderEmail","recipientEmail","message","truncateMessage","limit","slice","stockStatus","StockStatus","OutOfStock","WarningWithCircle","undefined","lowInventory","onlyXLeftInStock","alt","height","Price","amount","currency","weight","discounted","sale","DEFAULT_VISIBLE_ITEMS","initialState","canDisplayMoreItems","hasHiddenItems","isTaxIncluded","visibleItems","useCartSummary","displayMaxItems","config","useStore","isLoadingStoreConfig","cartData","cartSignal","data","cartSummaryMaxItems","cartSummaryTotalDisplay","taxCartDisplay","useQtys","TotalDisplay","Quantity","shoppingCartDisplayPrice","PriceDisplay","IncludingTax","totalQty","numOfVisibleItems","Math","setDisplayMaxItems","ViewAll","ViewMore","viewMaxItems","viewAllItems","CartSummaryComponent"],"mappings":"ihCAEA,MAAMA,EAAc,CAClBC,OAAQ,IACRC,MAAO,KACPC,OAAQ,KACRC,QAAS,IACX,EAWMC,GAAkBA,CAACC,EAAaC,IAAmC,CACvE,KAAM,CAACC,EAAMC,CAAK,EAAIH,EAAII,MAAM,GAAG,EAC7BC,EAAS,IAAIC,gBAAgBH,CAAK,EAElCI,EAAaC,KAEnB,IAAIC,EAAO,CAAA,EAEX,OAAIF,GAAcG,OAAOC,KAAKJ,CAAU,EAAEK,OAAS,GAAKX,EAC/CS,EAAAA,OAAOG,QAAQZ,CAAK,EAAEa,OAAO,CAACC,EAAK,CAACC,EAAKC,CAAK,IAAM,CACnDC,MAAAA,EAASX,EAAWS,CAAG,EAC7B,OAAIE,IACFH,EAAIG,CAAM,EAAID,GAETF,CACT,EAAG,CAA6B,CAAA,EAEzBN,EAAA,CACLU,KAAM,OACNC,QAAS,GACTC,KAAM,GACNC,IAAK,QACL,GAAGrB,CAAAA,EAIAY,OAAAA,QAAQJ,CAAI,EAAEc,QAAQ,CAAC,CAACP,EAAKC,CAAK,IAAM,CAClBA,GAAU,MACnCZ,EAAOmB,IAAIR,EAAKS,OAAOR,CAAK,CAAC,CAC/B,CACD,EAEO,GAAEf,CAAK,IAAGG,EAAOqB,SAAW,CAAA,EACtC,EAEaC,GAAiBA,CAC5BC,EACAC,IACG,CACC,GAAA,CAACD,GAAY,EAACC,GAAAA,MAAAA,EAASC,OAAO,OAE5BC,MAAAA,EAAqBF,GAClB9B,GAAgB6B,EAAU,CAC/B,GAAGC,CAAAA,CACJ,EAGInB,OAAAA,OAAOG,QAAQnB,CAAW,EAC9BsC,IAAI,CAAC,CAAGf,CAAAA,CAAK,IAAM,CAElB,MAAMgB,EAAiBJ,EAAQC,MAAQb,EAASvB,EAAYI,QAE5D,MAAQ,GAAEiC,EAAkB,CAC1B,GAAGF,EACHC,MAAOG,CACR,CAAA,CAAE,IAAGhB,CAAM,GAAA,CACb,EACAiB,KAAK;AAAA,CAAK,CACf,EC5EO,SAASC,GAASC,EAAwB,CAC/CC,OAAOD,SAASE,KAAOF,CACzB,CCqBO,MAAMG,GAAmDA,CAAC,CAC/DC,KAAAA,EACAvB,MAAAA,EAAQ,IACRwB,UAAAA,EACAC,SAAAA,EACAC,MAAAA,EACAC,QAAAA,EACAC,IAAAA,EACAC,IAAAA,EACAC,QAAAA,EACAC,cAAAA,EACAC,KAAAA,EAAO,SACP,GAAGC,CACL,IAAM,CACJ,KAAM,CAACC,EAAcC,CAAe,EAAIC,GAAiBC,OAAOrC,CAAK,CAAC,EAChEsC,EAAWD,OAAOT,CAAG,EACrBW,EAAWF,OAAOR,CAAG,EAE3BW,GAAU,IAAM,CACEH,EAAAA,OAAOrC,CAAK,CAAC,CAAA,EAC5B,CAACA,CAAK,CAAC,EAGV,MAAMyC,EAA0BC,GAC9BC,EAAS,MAAOC,GAAkB,CAChC,GAAId,EACE,GAAA,CACF,MAAMA,EAAQc,CAAQ,QACfC,EAAG,CACNd,GACFA,EAAcc,CAAW,CAE7B,GAED,GAAG,EACN,CAACf,EAASC,CAAa,CACzB,EAEMe,EAAqBC,GAAmB,CAC5C,IAAIH,EAAWG,EACXA,EAAST,IAAqBA,EAAAA,GAC9BS,EAASR,IAAqBA,EAAAA,GAClCE,EAAwBG,CAAQ,EAChCT,EAAgBS,CAAQ,CAAA,EAG1B,OACEI,EAAA,MAAA,CACExB,UAAWyB,EAAQ,CACjB,qBACC,uBAAsBjB,CAAK,GAC5BR,CAAS,CACV,EAAE0B,SAEHC,EAAA,MAAA,CACE3B,UAAWyB,EAAQ,CACjB,8BACC,gCAA+BjB,CAAK,GACrC,CAAE,qCAAqCN,CAAK,EAC5C,CAAE,uCAAuCC,CAAO,EAChD,CAAE,wCAAwCF,CAAQ,CAAC,CACpD,EAAEyB,UAGHF,EAAA,MAAA,CACExB,UAAWyB,EAAQ,CACjB,uCACA,CAAE,iDAAiDxB,CAAQ,CAAC,CAC7D,EAAEyB,SAEHF,EAACI,EAAS,CAAAF,SACRF,EAAA,SAAA,CACEK,KAAK,SACL7B,UAAWyB,EAAQ,CACjB,sCACA,CAAE,gDAAgDxB,CAAQ,CAAC,CAC5D,EACD6B,QAASA,IAAMR,EAAkBZ,EAAe,CAAC,EACjDT,SAAUA,GAAYS,EAAeI,EAAW,EAChD,aACGU,EAACO,EAAI,CAACC,GAAG,kCAAA,CAAoC,EAC/CN,SAEDF,EAACS,EAAI,CACHC,OAAQC,EACR3B,KAAK,KACL4B,OAAO,IACPC,QAAQ,YACRrC,UAAU,0BAAA,CACX,CAAA,CACK,CAAA,CACC,CAAA,CACR,EAGLwB,EAAA,QAAA,CACExB,UAAU,4BACVK,IAAAA,EACAD,IAAAA,EACAkC,KAAM,EACNT,KAAK,SACL9B,KAAAA,EACAvB,MAAOkC,EACPT,SAAAA,EACAsC,SAAiBlB,GAAA,CACTD,MAAAA,EAAWC,EAAEmB,cAAchE,MAC7B4C,IAAa,IACGP,EAAAA,OAAOO,CAAQ,CAAC,CAEtC,EAAE,GACEX,CAAAA,CACL,EAEDe,EAAA,MAAA,CACExB,UAAWyB,EAAQ,CACjB,uCACA,CAAE,iDAAiDxB,CAAQ,CAAC,CAC7D,EAAEyB,SAGHF,EAACI,EAAS,CAAAF,SACRF,EAAA,SAAA,CACEK,KAAK,SACL7B,UAAWyB,EAAQ,CACjB,sCACA,CAAE,gDAAgDxB,CAAQ,CAAC,CAC5D,EACD6B,QAASA,IAAMR,EAAkBZ,EAAe,CAAC,EACjDT,SAAUA,GAAYS,EAAeK,EAAW,EAChD,aACGS,EAACO,EAAI,CAACC,GAAG,kCAAA,CAAoC,EAC/CN,SAEDF,EAACS,EAAI,CACHC,OAAQO,EACRjC,KAAK,KACL4B,OAAO,IACPC,QAAQ,YACRrC,UAAU,yBAAA,CACX,CAAA,CACK,CAAA,CACC,CAAA,CACR,CAAC,CAAA,CACH,CAAA,CACF,CAET,EC3Ja0C,GAAuCA,CAAC,CACnD1C,UAAAA,EACA2C,IAAAA,EACA/E,OAAAA,EACAgF,QAAAA,EAAU,OACVC,OAAAA,EACAC,OAAAA,EACA,GAAGrC,CACL,IAAM,CACJ,KAAM,CAACsC,EAAQC,CAAS,EAAIpC,EAAS,EAAK,EAEpCqC,EAAUC,EAAQ,IAAM,CAExBL,GAAAA,EAAeA,OAAAA,EAGf,GAAA,GAACF,GAAO,CAAC/E,GAGb,OAAOsB,GAAeyD,EAAK,CAAE,GAAG/E,CAAAA,CAAQ,CACvC,EAAA,CAACA,EAAQ+E,EAAKE,CAAM,CAAC,EAGlBM,EAAiB9B,GAAW,CAChC2B,EAAU,EAAI,EACdF,GAAAA,MAAAA,EAASzB,EAAC,EAGZ,OACEG,EAAA,MAAA,CAAA,GACMf,EACJT,UAAWyB,EAAQ,CACjB,eACA,CAAC,uBAAwBsB,CAAM,EAC/B/C,CAAS,CACV,EACD4C,QAAAA,EACAE,OAAQK,EACRR,IAAAA,EACAE,OAAQI,CAAAA,CACT,CAEL,ECrCaG,EAA6DA,CAAC,CACzEpD,UAAAA,EACA0B,SAAAA,EACA2B,MAAAA,EACAC,cAAAA,EACAC,mBAAAA,EAAqB,OACrBC,SAAAA,EAAWf,EACXgB,UAAAA,EAAYtB,EACZuB,SAAAA,EAAWjB,EACXkB,aAAAA,EAAe,GACfC,wBAAAA,EAA0B,GAC1BC,cAAAA,EACA,GAAGpD,CACL,IAAM,CACJ,KAAM,CAACqD,EAAMC,CAAO,EAAInD,EAAkB,EAAK,EACzCoD,EAAkB3C,GAAgD,CACtEA,EAAE4C,yBAAyB,EAE3B,MAAMC,EAAO,CAACJ,EACdC,EAAQG,CAAI,EACZL,GAAAA,MAAAA,EAAgBK,EAAI,EAGhBC,EAAcC,EACjB,oBAAmBN,EAAO,QAAU,MAAO,QAC9C,EAAEO,MAEIC,EACJ9C,EAACS,EAAI,CACHC,OAAQsB,EACRhD,KAAK,KACLsB,QAASkC,EACTO,WAAYP,EACZhE,UAAW,qCAAA,CACZ,EAGGwE,EACJhD,EAACS,EAAI,CACHC,OAAQuB,EACRjD,KAAK,KACLsB,QAASkC,EACTO,WAAYP,EACZhE,UAAW,sCAAA,CACZ,EAGGyE,EAAWjD,EAACS,EAAI,CAACC,OAAQwB,EAAUlD,KAAK,IAAA,CAAM,EAEpD,OACEmB,EAAA,MAAA,CAAA,GACMlB,EACJT,UAAWyB,EAAQ,CAAC,2BAA4BzB,CAAS,CAAC,EAAE0B,UAE5DC,EAAA,MAAA,CAAK3B,UAAW,oCAAoC0B,UAClDF,EAAA,MAAA,CACExB,UAAW,iCACX8B,QAASkC,EACTO,WAAYP,EACZU,KAAK,SACL,aAAa,GAAEP,CAAY,IAAGd,CAAM,GACpCsB,SAAU,EAAEjD,SAEZC,EAAA,MAAA,CAAK3B,UAAW,4CAA4C0B,UACzD6B,IAAuB,SAAWO,EAAOU,EAAYF,GAErDX,GAAgBc,EAEjBjD,EAAA,KAAA,CAAIxB,UAAW,kCAAkC0B,SAAE2B,CAAAA,CAAU,CAAC,CAAA,CAC3D,CAAA,CACF,EAEL1B,EAAA,MAAA,CAAK3B,UAAW,qDAAqD0B,SAAA,CAClE4B,GACC9B,EAAA,KAAA,CAAIxB,UAAW,2CAA2C0B,SACvD4B,CAAAA,CACC,EAGLC,IAAuB,UAAYO,EAAOU,EAAYF,EAAS,CAAA,CAC7D,CAAC,CAAA,CACH,EAEL9C,EAAA,MAAA,CACExB,UAAW,8CACX4E,MAAO,CAAEC,QAASf,EAAO,OAAS,MAAO,EAAEpC,UAEzCoC,GAASF,GAA2B,CAACE,IAAUpC,CAAAA,CAC9C,CAAC,CAAA,CACH,CAET,EAaaoD,GAA+CA,CAAC,CAC3D9E,UAAAA,EACA0B,SAAAA,EACA6B,mBAAAA,EAAqB,OACrBC,SAAAA,EAAWf,EACXgB,UAAAA,EAAYtB,EACZ,GAAG1B,CACL,IAAM,CACEsE,MAAAA,EAAUvD,EAACwD,EAAO,CAACC,QAAQ,WAAA,CAAa,EAExCC,EAA0BC,GAC9BxD,EAAAyD,EAAA,CAAA1D,SAAA,CACEF,EAAC4B,EAAgB,CAAA,GACX+B,EAAM1E,MACV8C,mBAAAA,EACAC,SAAAA,EACAC,UAAAA,CACD,CAAA,EACAsB,CAAO,CAAA,CACR,EAGJ,OACEvD,EAAA,MAAA,CAAA,GAASf,EAAOT,UAAWyB,EAAQ,CAAC,mBAAoBzB,CAAS,CAAC,EAAE0B,SACjE,CACCqD,EACA,IACGM,MAAMC,QAAQ5D,CAAQ,EACnBA,EACA,CAACA,CAAQ,GACbnC,IAAI2F,CAAsB,CAAC,CAAA,CAE5B,CAET,ECvHaK,GAA6CA,CAAC,CACzDvF,UAAAA,EACA0B,SAAAA,EACA8D,UAAAA,EACAC,MAAAA,EACApC,MAAAA,EACAqC,MAAAA,EACAC,YAAAA,EAAc,GACdC,YAAAA,EAAc,GACdC,MAAAA,EACAC,kBAAAA,EACAC,IAAAA,EACAC,eAAAA,EACAC,QAAAA,EACAC,MAAAA,EACAC,SAAAA,EAAW,EACXC,YAAAA,EACAxD,QAAAA,EAAU,GACVyD,SAAAA,EAAW,GACXC,WAAAA,EACAC,SAAAA,EACA,GAAG9F,CACL,IAAM,SACE,KAAA,CAAE+F,OAAAA,CAAAA,EAAWC,GAAWC,EAAS,EAEjCC,EAASvC,EAAQ,CACrBwC,KAAM,6BACNT,SAAU,iCACVU,OAAQ,+BACRC,cAAe,sCACfnB,YAAa,oCACbC,YAAa,oCACbS,SAAU,iCACVU,gBAAiB,uCAAA,CAClB,EAEGnE,OAAAA,EAAgBpB,EAACwF,IAAkB,EAGrCrF,EAAA,MAAA,CAAA,GACMlB,EACJT,UAAWyB,EAAQ,CACjB,mBACA,CAAC,6BAA8B4E,CAAQ,EACvCrG,CAAS,CACV,EAAE0B,SAEF2E,CAAAA,GACC7E,EAACyF,GAAe,CACdjH,UAAWyB,EAAQ,CAAC,2BAA2B,CAAC,EAChD+D,UACEA,GACImB,EAAAA,EAAON,WAAPM,YAAAA,EAAiBO,QAAQ,YAAa1B,GACtCmB,EAAOI,eAAAA,CAEd,EAEHpF,EAAA,MAAA,CAAK3B,UAAU,4BAA2B0B,SAAA,CAExCF,EAAC2F,EAAU,CACTC,KAAM3B,EACNzF,UAAWyB,EAAQ,CAAC,yBAAyB,CAAC,CAAA,CAC/C,EAGDD,EAAC2F,EAAU,CACTC,KAAM/D,EACNrD,UAAWyB,EAAQ,CACjB,0BACA,CAAC,gCAAiC,CAAC,CAAC6E,GAAc,CAAC,CAACC,CAAQ,CAAC,CAC9D,CAAA,CACF,EAGAH,GACC5E,EAAC2F,EAAU,CACTC,KAAMhB,EACNpG,UAAWyB,EAAQ,CAAC,+BAA+B,CAAC,CAAA,CACrD,EAIHD,EAAC2F,EAAU,CAACC,KAAMrB,EAAK/F,UAAWyB,EAAQ,CAAC,uBAAuB,CAAC,CAAA,CAAI,EAEtEuE,GACCxE,EAAA,KAAA,CAAIxB,UAAWyB,EAAQ,CAAC,kCAAkC,CAAC,EAAEC,SAC1DzD,OAAOG,QAAQ4H,CAAc,EAAEzG,IAAI,CAAC,CAAChB,EAAKC,CAAK,IAC9CmD,EAAA,KAAA,CAEE3B,UAAWyB,EAAQ,CAAC,wCAAwC,CAAC,EAAEC,UAE9DnD,EAAI,IAAE,IACPiD,EAAA,SAAA,CACExB,UAAWyB,EAAQ,CACjB,+CAA+C,CAChD,EAAEC,SAEFlD,CAAAA,CACK,CAAC,CAAA,EAVJD,CAWH,CACL,CAAA,CACC,EAINoD,EAAA,OAAA,CAAM3B,UAAWyB,EAAQ,CAAC,yBAAyB,CAAC,EAAEC,SACnD,CAAA,CAAC4E,GACA3E,EAAA,OAAA,CAAM3B,UAAU,oCAAmC0B,SAAA,CAChDyE,EAASkB,eAAeb,CAAM,EAAE,KAAG,GAAG,CAAA,CACnC,EAGRhF,EAAC2F,EAAU,CAACC,KAAM1B,EAAOhB,KAAK,MAAQ,CAAA,EAErCyB,EAAW,GACVxE,EAAAyD,EAAA,CAAA1D,SAAE,CAAA,IAECiF,EAAOC,IAAI,CAAA,CACZ,EAGHjB,GACChE,EAAA,OAAA,CACE,cAAY,cACZ3B,UAAU,sCAAqC0B,SAChD,CAAA,IAEEiF,EAAOhB,WAAW,CAAA,CACf,EAGPC,GACCjE,EAAA,OAAA,CACE,cAAY,cACZ3B,UAAU,sCAAqC0B,SAChD,CAAA,IAEEiF,EAAOf,WAAW,CAAA,CACf,CACP,CAAA,CACG,EAGNjE,EAAA,MAAA,CACE3B,UAAWyB,EAAQ,CACjB,6BACA,CAAC,mCAAoC,CAAC,CAAC6E,CAAU,CAAC,CACnD,EAAE5E,SAEF4E,CAAAA,EACC9E,EAAC1B,GAAW,CACVE,UAAWyB,EAAQ,CAAC,yCAAyC,CAAC,EAC9DjD,MAAO2H,EACP/F,IAAK,EACLE,QAAU9B,GAAU8H,GAAAA,YAAAA,EAAazF,OAAOrC,CAAK,GAC7CuB,KAAK,WACL,aAAY4G,EAAOR,SACnBlG,SAAUoG,CAAAA,CACX,EAED1E,EAAA,OAAA,CAAM3B,UAAWyB,EAAQ,CAAC,mCAAmC,CAAC,EAAEC,SAAA,CAC7DiF,EAAOR,SAAS,IAAE,IACnB3E,EAAA,SAAA,CAAQxB,UAAU,qCAAoC0B,SACnDb,OAAOsF,CAAQ,EAAEkB,eAAeb,CAAM,CAAA,CACjC,CAAC,CAAA,CACL,EAIPP,GACCzE,EAAC2F,EAAU,CACTC,KAAMnB,EACNjG,UAAWyB,EAAQ,CACjB,4BACA,qCAAqC,CACtC,CAAA,CACF,EAIFyE,GACC1E,EAAC2F,EAAU,CACTC,KAAMlB,EACNlG,UAAWyB,EAAQ,CACjB,0BACA,mCAAmC,CACpC,CAAA,CACF,CACF,CAAA,CACE,EAGJwE,GACCzE,EAAC2F,EAAU,CACTC,KAAMnB,EACNjG,UAAWyB,EAAQ,CAAC,2BAA2B,CAAC,CAAA,CACjD,EAIFyE,GACC1E,EAAC2F,EAAU,CACTC,KAAMlB,EACNlG,UAAWyB,EAAQ,CAAC,yBAAyB,CAAC,CAAA,CAC/C,EAIHE,EAAA,MAAA,CACE3B,UAAWyB,EAAQ,CACjB,0BACA,CAAC,gCAAiC,CAAC,CAAC8E,CAAQ,CAAC,CAC9C,EAAE7E,UAEHF,EAAA,MAAA,CAAKxB,UAAU,8BAA6B0B,SAC1CF,EAAC2F,EAAU,CAACC,KAAMvB,EAAOnB,KAAK,MAAA,CAAQ,CAAA,CACnC,EACJiB,GACChE,EAAA,OAAA,CACE,cAAY,cACZ3B,UAAWyB,EAAQ,CAAC,qCAAqC,CAAC,EAAEC,SAC7D,CAAA,IAEEiF,EAAOhB,WAAW,CAAA,CACf,EAGPC,GACCpE,EAAA,MAAA,CAAKxB,UAAU,uCAAsC0B,SACnDC,EAAA,OAAA,CACE,cAAY,cACZ3B,UAAWyB,EAAQ,CACjB,8CAA8C,CAC/C,EAAEC,SAEFoE,CAAAA,GACCtE,EAAC2F,EAAU,CAACC,KAAMtB,EAAmBpB,KAAK,MAAA,CAAQ,EAClD,IAEDiC,EAAOf,WAAW,CAAA,CACf,CAAA,CACH,CACN,CAAA,CACE,CAAC,CAAA,CACH,EAGJW,GACC/E,EAAC8F,GAAM,CACLtH,UAAWyB,EAAQ,CAAC,0BAA0B,CAAC,EAC/CwD,QAAQ,WACRnD,QAASA,IAAMyE,GAAAA,YAAAA,IACfgB,KACE/F,EAACS,EAAI,CACHC,OAAQsF,GACRhH,KAAK,KACL4B,OAAO,IACPC,QAAQ,YACR,aACEmD,GACImB,EAAAA,EAAOE,SAAPF,YAAAA,EAAeO,QAAQ,YAAa1B,GACpCmB,EAAOG,aAAAA,CAEd,EAEH7G,SAAUoG,CAAAA,CACX,CACF,CAAA,CACE,CAET,ECjTaW,EAAsCA,IAE/CxF,EAAA,MAAA,CAAKxB,UAAU,6CAA4C0B,SACzDC,EAAC8F,EAAQ,CAACzH,UAAU,uDAAsD0B,UACxEF,EAAA,MAAA,CAAKxB,UAAU,0BAAyB0B,SACtCF,EAACkG,EAAW,CAAC1H,UAAU,kCAAA,CAAoC,CAAA,CACxD,EACLwB,EAAA,MAAA,CAAKxB,UAAU,0BAAyB0B,SACtCF,EAACkG,EAAW,CAAC1H,UAAU,kCAAA,CAAoC,CAAA,CACxD,EACLwB,EAAA,MAAA,CAAKxB,UAAU,wBAAuB0B,SACpCF,EAACkG,EAAW,CAAC1H,UAAU,kCAAA,CAAoC,CAAA,CACxD,EACLwB,EAAA,MAAA,CAAKxB,UAAU,0BAAyB0B,SACtCF,EAACkG,EAAW,CAAC1H,UAAU,kCAAA,CAAoC,CAAA,CACxD,EACLwB,EAAA,MAAA,CAAKxB,UAAU,6BAA4B0B,SACzCF,EAACkG,EAAW,CAAC1H,UAAU,kCAAA,CAAoC,CAAA,CACxD,EACLwB,EAAA,MAAA,CAAKxB,UAAU,0BAAyB0B,SACtCF,EAACkG,EAAW,CAAC1H,UAAU,kCAAA,CAAoC,CAAA,CACxD,CAAC,CAAA,CACE,CAAA,CACP,ECtBI2H,GAAyCA,IAElDnG,EAACoG,EAAI,CAAAlG,SACHC,EAAC8F,EAAQ,CACP,cAAY,wBACZzH,UAAU,iCACV4E,MAAO,CAAEiD,oBAAqB,KAAM,EAAEnG,SAAA,CAEtCF,EAACkG,EAAW,CAACzC,QAAQ,UAAU6C,UAAW,GAAMtH,KAAK,QAAA,CAAU,EAC/DgB,EAACwF,EAAkB,EAAA,EACnBxF,EAACwF,EAAgB,CAAA,CAAE,EACnBxF,EAACwF,EAAkB,CAAA,CAAA,EACnBxF,EAACwF,IAAkB,EACnBxF,EAACwF,EAAkB,CAAA,CAAA,EACnBxF,EAACkG,EAAW,CAAClH,KAAK,SAASsH,UAAW,EAAA,CAAO,CAAC,CAAA,CACtC,CAAA,CACN,ECjBGC,GAA+CA,IAExDvG,EAACiG,EAAQ,CACP,cAAY,wBACZzH,UAAU,wCACV4E,MAAO,CAAEiD,oBAAqB,KAAM,EAAEnG,SAEtCF,EAACkG,EAAW,CAACI,UAAW,GAAMtH,KAAK,QAAA,CAAU,CAAA,CACrC,ECqBDwH,EAA+DA,CAAC,CAC3EnG,KAAAA,EACAC,QAAAA,EACAJ,SAAAA,CACF,IAEIC,EAAAyD,EAAA,CAAA1D,SAAA,CACEF,EAACwD,EAAO,CACNhF,UAAU,wCACViF,QAAQ,SAAA,CACT,EACDzD,EAAA,SAAA,CACE,cAAc,UAASK,CAAK,GAC5B7B,UAAU,gCACV8B,QAAAA,EAAiBJ,SAAAA,CAAAA,CAGX,CAAC,CAAA,CACT,EAIAuG,GAA8CA,CAAC,CACnD5E,MAAAA,EACA6E,UAAAA,EACAC,cAAAA,EACAC,UAAAA,EACAC,MAAAA,EACA1C,YAAAA,EACA2C,OAAAA,CACF,IAEI9G,EAAA4D,EAAA,CAAA1D,SACGwG,EACC1G,EAACuG,GAAyB,CAAA,CAAE,EAE5BvG,EAACsD,GAAS,CAACvB,mBAAmB,OAAM7B,SAClCC,EAACyB,EAAgB,CACfC,MAAQ,GAAEA,CAAM,KAAI8E,CAAc,IAClC7E,eACE8E,GAAAA,YAAAA,MACE5G,EAAA,IAAA,CAAG3B,KAAMuI,GAAAA,YAAAA,IAAeG,IAAI,aAAY7G,SACtCF,EAACO,EAAI,CAACC,GAAG,+BAAA,CAAiC,CAAA,CACzC,EAENN,SAAA,CAEA2G,GAAAA,YAAAA,EAAO9I,IAAKiJ,GACXhH,EAACiH,EAAe,CAEdD,KAAAA,EACA7C,YAAAA,CAFK6C,EAAAA,GAAAA,YAAAA,EAAME,GAGZ,GAGFJ,CAAM,CAAA,CACS,CAAA,CACT,CAAA,CAEb,EAIAK,GAA+CA,CAAC,CACpDtF,MAAAA,EACA6E,UAAAA,EACAC,cAAAA,EACAC,UAAAA,EACAC,MAAAA,EACAC,OAAAA,EACA3C,YAAAA,CACF,IAEInE,EAAA4D,EAAA,CAAA1D,SACGwG,EACC1G,EAACmG,GAAmB,CAAA,CAAE,EAEtBhG,EAACiG,EAAI,CAAAlG,UACHC,EAAA,MAAA,CAAK3B,UAAU,iCAAgC0B,SAAA,CAC7CC,EAACiH,GAAO,CAACC,MAAO,EAAG7I,UAAU,+BAA8B0B,UACxD2B,EAAM,KAAG8E,EAAc,GAC1B,CAAS,CAAA,GAERC,GAAAA,YAAAA,MACC5G,EAAA,IAAA,CACExB,UAAU,8BACVH,KAAMuI,GAAAA,YAAAA,IACNG,IAAI,aAAY7G,SAEhBF,EAACO,EAAI,CAACC,GAAG,+BAAA,CAAiC,CAAA,CACzC,CACJ,CAAA,CACE,EAELR,EAACwD,EAAO,CACNhF,UAAU,qCACViF,QAAQ,SAAA,CACT,EAEDzD,EAAA,MAAA,CAAKxB,UAAU,+BAA8B0B,SAC1C2G,GAAAA,YAAAA,EAAO9I,IAAKiJ,GACXhH,EAACiH,EAAe,CAEdD,KAAAA,EACA7C,YAAAA,CAAAA,EAFK6C,GAAAA,YAAAA,EAAME,GAGZ,EAEA,CAAA,EAEJJ,CAAM,CAAA,CACH,CAAA,CAER,EAIOQ,GAAmDA,CAAC,CAC/D9I,UAAAA,EACA,GAAGS,CACL,IAAM,CACE4C,MAAAA,EAAQe,EAAQ,4BAA4B,EAAEf,MAC9C0F,EAAaC,IAEnB,OACExH,EAAA,MAAA,CAAKxB,UAAWyB,EAAQ,CAAC,wBAAyBzB,CAAS,CAAC,EAAE0B,SAC3DqH,IAAe,QACdvH,EAACyG,GAAM,CAAC5E,MAAAA,EAAa,GAAK5C,CAAAA,CAAQ,EAElCe,EAACmH,GAAO,CAACtF,MAAAA,EAAa,GAAK5C,CAAAA,CAAQ,CAAA,CAElC,CAET,ECtJagI,EAA2DA,CAAC,CACvEzI,UAAAA,EACAwI,KAAAA,EACA7C,YAAAA,EAAc,EAChB,IAAM,SACJ,MAAMsD,EAAe7E,EAAQ,CAC3B8E,OAAQ,uCACRC,UAAW,0CACXC,QAAS,wCACTC,SAAU,6CACVC,gBAAiB,4BACjB,GAAI,UAAWd,GAAQA,EAAKe,MACxB,CACEC,MACEhI,EAACO,EAAI,CACHC,GAAG,0CACHyH,OAAQjB,EAAKe,MAAMpL,OACnBuL,OAAQ,CACNC,MAAOnB,EAAKe,MAAMpL,MACpB,CAAA,CACD,CAAA,EAGL,CAAC,CAAA,CACN,EAKD,IAAIuH,EAAQ8C,EAAKoB,aACb/D,EAAQ2C,EAAK3C,MAEbF,IACFD,EAAQ8C,EAAKqB,aACbhE,EAAQ2C,EAAKsB,cAGf,MAAM9D,EAAiB,CACrB,GAAI,wBAAyBwC,EAAOA,EAAKuB,oBAAsB,CAAC,EAChE,GAAI,wBAAyBvB,EAAOA,EAAKwB,oBAAsB,CAAC,EAChE,GAAI,UAAWxB,GAAQA,EAAKe,MACxB,CAAE,CAACN,EAAaO,KAAK,EAAGhB,EAAKe,MAAM9J,KAAK,IAAI,CAAA,EAC5C,CAAC,EACL,GAAI,eAAgB+I,GAAQA,EAAKyB,WAC7B,CAAE,CAAChB,EAAaC,MAAM,EAAGV,EAAKyB,UAAAA,EAC9B,CAAC,EACL,GAAI,kBAAmBzB,GAAQA,EAAK0B,cAChC,CAAE,CAACjB,EAAaE,SAAS,EAAGX,EAAK0B,aAAAA,EACjC,CAAC,EACL,GAAI,gBAAiB1B,GACrB,eAAgBA,GAChBA,EAAKyB,YACLzB,EAAK2B,YACD,CAAE,CAAClB,EAAaC,MAAM,EAAI,GAAEV,EAAKyB,UAAW,KAAIzB,EAAK2B,WAAY,GAAA,EACjE,CAAC,EACL,GAAI,mBAAoB3B,GACxB,kBAAmBA,GACnBA,EAAK0B,eACL1B,EAAK4B,eACD,CACE,CAACnB,EAAaE,SAAS,EAAI,GAAEX,EAAK0B,aAAc,KAAI1B,EAAK4B,cAAe,GAAA,EAE1E,CAAC,EACL,GAAI,YAAa5B,GAAQA,EAAK6B,SAAW7B,EAAK6B,SAAW,GACrD,CAAE,CAACpB,EAAaG,OAAO,EAAGkB,EAAgB9B,EAAK6B,QAAmB,EAAE,CAAA,EACpE,CAAC,CAAA,EAGEC,SAAAA,EAAgBD,EAAiBE,EAAe,CACnDF,OAAAA,EAAQlM,OAASoM,EACX,GAAEF,EAAQG,MAAM,EAAGD,CAAK,CAAE,MAE7BF,CACT,CAEA,MAAMnE,EACJsC,EAAKiC,cAAgBC,GAAYC,WAC/BhJ,EAAA,OAAA,CAAM,cAAY,2BAA0BD,SAAA,CAC1CF,EAACS,EAAI,CAACC,OAAQ0I,EAAmBpK,KAAK,IAAA,CAAM,EAC3CyI,EAAaK,eAAe,CAAA,CACzB,EACJuB,OAEAC,EACJ,CAAC5E,GAASsC,EAAKuC,iBACbpJ,EAAA,OAAA,CAAM,cAAY,mCAAkCD,SAAA,CAClDF,EAACS,EAAI,CAACC,OAAQ0I,EAAmBpK,KAAK,IAAA,CAAM,EAC5CgB,EAACO,EAAI,CACHC,GAAG,mCACHyH,OAAQjB,EAAKuC,iBACbrB,OAAQ,CACNC,MAAOnB,EAAKuC,gBACd,CAAA,CACD,CAAC,CAAA,CACE,EACJF,OAEN,OACErJ,EAAA,MAAA,CAAKxB,UAAWyB,EAAQ,CAAC,6BAA8BzB,CAAS,CAAC,EAAE0B,SACjEF,EAAC+D,GAAQ,CACP,cAAY,oBAEZI,YAAAA,EACAtC,MAAO7B,EAAA,MAAA,CAAK,cAAY,eAAcE,SAAE8G,EAAKzI,IAAAA,CAAU,EACvDgG,IAAKvE,EAAA,MAAA,CAAAE,SAAM8G,EAAKzC,GAAAA,CAAS,EACzBI,SAAUqC,EAAKrC,SACfV,MACEjE,EAACkB,GAAK,CACJC,MAAK6F,EAAAA,EAAK/C,QAAL+C,YAAAA,EAAY7F,MAAO,GACxBqI,KAAKxC,EAAAA,EAAK/C,QAAL+C,YAAAA,EAAYwC,IACjBpI,QAAQ,OACRvD,MAAM,KACN4L,OAAO,KACPrN,OAAQ,CAAEyB,MAAO,EAAG,CAAA,CACrB,EAEH4G,QAAS6E,EACT5E,MAAAA,EACAF,eAAAA,EACAN,MACElE,EAAC0J,EAAK,CACJC,OAAQ3C,EAAKoB,aAAapL,MAC1B4M,SAAU1F,EAAM0F,SAChBC,OAAO,QAAA,CACR,EAEHxF,MACElE,EAAAyD,EAAA,CAAA1D,SAAA,CACEF,EAAC0J,EAAK,CACJC,OAAQ3C,EAAKoB,aAAapL,MAAQgK,EAAKrC,SACvCiF,SAAU1F,EAAM0F,SAChBnG,QAASuD,EAAK8C,WAAa,gBAAkB,SAC9C,CAAA,EAEA9C,EAAK8C,YACJ9J,EAAC0J,EAAK,CAACC,OAAQtF,EAAMrH,MAAO4M,SAAUvF,EAAMuF,SAAUG,KAAI,EAAA,CAAE,CAC7D,CAAA,CACD,CAAA,EApCC/C,EAAKE,GAsCX,CAAA,CACE,CAET,EC5Ja8C,GAAwB,EC0B/BC,GAAiC,CACrCC,oBAAqB,GACrBC,eAAgB,GAChBzD,UAAW,GACX0D,cAAe,GACfzD,cAAe,EACf0D,aAAc,CAAA,CAChB,EAEO,SAASC,GAAeC,EAA4C,CACnE,KAAA,CAAEC,OAAAA,GAAWC,GAAS,EACtBC,EAAuBF,IAAWnB,OAElCsB,EAAWC,GAAW5N,MAAM6N,KAGlC,GAAIH,GAFsBC,IAAatB,OAEeY,OAAAA,GAEhD,KAAA,CAAEa,oBAAAA,EAAqBC,wBAAAA,EAAyBC,eAAAA,CACpDR,EAAAA,EAEIS,EAAUF,IAA4BG,GAAaC,SACnDf,EACJY,EAAeI,2BAA6BC,GAAaC,aAErD,CAAEzE,MAAAA,EAAO0E,SAAAA,CAAaZ,EAAAA,EACtBhE,EAAgBsE,EAAUM,EAAW1E,EAAMlK,OAE3C6O,EAAoBjB,EACtBO,EACAW,KAAK7M,IAAIkM,EAAqBd,EAAqB,EAEjDG,EAAiBtD,EAAMlK,OAAS6O,EAChCnB,EAAexD,EAAMmC,MAAM,EAAGwC,CAAiB,EAO9C,MAAA,CACLtB,oBALAC,GACA,CAACI,GACDiB,GAAqBV,EAIrBX,eAAAA,EACAzD,UAAW,GACX0D,cAAAA,EACAzD,cAAAA,EACA0D,aAAAA,CAAAA,CAEJ,CAEO,MAAM/C,GAA2CA,CAAC,CACvDV,UAAAA,EACA,GAAG3H,CACL,IAAM,CACJ,KAAM,CAACsL,EAAiBmB,CAAkB,EAAItM,EAAkB,EAAK,EAE/DqI,EAAe7E,EAAQ,CAC3B+I,QAAS,+BACTC,SAAU,+BAAA,CACX,EAEK,CACJ1B,oBAAAA,EACAC,eAAAA,EACAzD,UAAAA,EACA0D,cAAAA,EACAC,aAAAA,EACA1D,cAAAA,CAAAA,EACE2D,GAAeC,CAAe,EAE5BsB,EAAenM,EAAY,IAAM,CACrCgM,EAAmB,EAAI,CACzB,EAAG,CAAE,CAAA,EAECI,EAAepM,EAAY,IAAM,CAChCkH,GACL1I,GAAS0I,GAAW,CAAA,EACnB,CAACA,CAAS,CAAC,EAERE,EAASpF,EAAQ,IAAM,CAC3B,GAAKyI,EAEL,IAAID,EACF,OACElK,EAACwG,EAAiB,CAACnG,KAAK,YAAYC,QAASuL,EAAa3L,SACvDuH,EAAamE,QAAAA,CACG,EAIvB,GAAIhF,EACF,OACE5G,EAACwG,EAAiB,CAACnG,KAAK,WAAWC,QAASwL,EAAa5L,SACtDuH,EAAakE,OAAAA,CACG,EAGzB,EAAG,CACDxB,EACAD,EACA2B,EACApE,EAAamE,SACbnE,EAAakE,QACbG,EACAlF,CAAS,CACV,EAED,OACE5G,EAAC+L,GAAoB,CAAA,GACf9M,EACJ6H,OAAAA,EACA3C,YAAaiG,EACb1D,UAAAA,EACAG,MAAOwD,EACPzD,UAAAA,EACAD,cAAAA,CAAAA,CACD,CAEL"}