{"version":3,"file":"ErrorBanner.js","sources":["../../ElsieSDK/packages/elsie/src/components/AlertBanner/AlertBanner.tsx","../src/containers/ErrorBanner/ErrorBanner.tsx"],"sourcesContent":["import { FunctionComponent, VNode } from 'preact';\nimport { HTMLAttributes } from 'preact/compat';\nimport { classes, VComponent } from '@adobe/elsie/lib';\nimport '@adobe/elsie/components/AlertBanner/AlertBanner.css';\nimport { Button, Icon } from '@adobe/elsie/components';\nimport { Close } from '@adobe/elsie/icons';\nimport { useText } from '@adobe/elsie/i18n';\n\nexport interface AlertBannerProps\n  extends Omit<HTMLAttributes<HTMLDivElement>, 'icon' | 'action'> {\n  variant: 'brand' | 'neutral' | 'success' | 'warning';\n  icon?: VNode<HTMLAttributes<SVGSVGElement>>;\n  message: VNode;\n  onDismiss: () => void;\n  action?: {\n    label: string;\n    onClick: (event: Event) => void;\n  };\n}\n\nexport const AlertBanner: FunctionComponent<AlertBannerProps> = ({\n  className,\n  variant,\n  icon,\n  message,\n  onDismiss,\n  action,\n  ...props\n}) => {\n  const translations = useText({\n    dismiss: 'Dropin.InlineAlert.dismissLabel',\n  });\n\n  return (\n    <div\n      {...props}\n      className={classes([\n        className,\n        'dropin-alert-banner',\n        `dropin-alert-banner--${variant}`,\n      ])}\n    >\n      <div className={'dropin-alert-banner__content'}>\n        {icon && (\n          <VComponent\n            node={icon}\n            aria-hidden=\"true\"\n            className={'dropin-alert-banner__icon'}\n          />\n        )}\n\n        {/* Message */}\n        <VComponent\n          node={message}\n          className={classes(['dropin-alert-banner__message'])}\n        />\n      </div>\n\n      <div className={'dropin-alert-banner__actions'}>\n        {action && (\n          <Button\n            variant=\"tertiary\"\n            className={'dropin-alert-banner__action'}\n            onClick={action.onClick}\n            aria-label={action.label}\n          >\n            {action.label}\n          </Button>\n        )}\n\n        <Button\n          icon={<Icon source={Close} size=\"24\" stroke=\"2\" />}\n          className=\"dropin-alert-banner__dismiss-button\"\n          variant=\"primary\"\n          onClick={onDismiss}\n          aria-label={translations.dismiss}\n        />\n      </div>\n    </div>\n  );\n};\n","import { FunctionComponent, useEffect, useState } from 'preact/compat';\nimport { useText } from '@adobe/elsie/i18n';\nimport { events } from '@adobe/event-bus';\nimport { AlertBanner, AlertBannerProps, Icon } from '@adobe/elsie/components';\nimport { WarningFilled } from '@adobe/elsie/icons';\n\nexport const ErrorBanner: FunctionComponent<Partial<AlertBannerProps>> = (\n  props\n) => {\n  const [hasError, setHasError] = useState<boolean>(false);\n\n  useEffect(() => {\n    const subscription = events.on('error', (data) => {\n      if (data?.source === 'checkout' && data?.type === 'network') {\n        setHasError(true);\n      }\n    });\n    return () => {\n      subscription?.off();\n    };\n  }, []);\n\n  const onDismiss = () => {\n    setHasError(false);\n  };\n\n  const translations = useText({\n    message: 'Checkout.ErrorBanner.genericMessage',\n    label: 'Checkout.ErrorBanner.dismissLabel',\n  });\n\n  if (!hasError) return null;\n\n  return (\n    <AlertBanner\n      {...props}\n      data-testid=\"error-banner\"\n      icon={<Icon source={WarningFilled} />}\n      message={<span>{translations.message}</span>}\n      onDismiss={onDismiss}\n      variant=\"warning\"\n    />\n  );\n};\n"],"names":["AlertBanner","className","variant","icon","message","onDismiss","action","props","translations","useText","dismiss","_jsxs","classes","children","_jsx","VComponent","node","Button","onClick","label","Icon","source","Close","size","stroke","ErrorBanner","hasError","setHasError","useState","useEffect","subscription","events","on","data","type","off","WarningFilled"],"mappings":"kZAoBO,MAAMA,EAAmDA,CAAC,CAC/DC,UAAAA,EACAC,QAAAA,EACAC,KAAAA,EACAC,QAAAA,EACAC,UAAAA,EACAC,OAAAA,EACA,GAAGC,CACL,IAAM,CACJ,MAAMC,EAAeC,EAAQ,CAC3BC,QAAS,iCAAA,CACV,EAED,OACEC,EAAA,MAAA,CAAA,GACMJ,EACJN,UAAWW,EAAQ,CACjBX,EACA,sBACC,wBAAuBC,CAAQ,EAAC,CAClC,EAAEW,UAEHF,EAAA,MAAA,CAAKV,UAAW,+BAA+BY,SAC5CV,CAAAA,GACCW,EAACC,EAAU,CACTC,KAAMb,EACN,cAAY,OACZF,UAAW,2BAAA,CACZ,EAIHa,EAACC,EAAU,CACTC,KAAMZ,EACNH,UAAWW,EAAQ,CAAC,8BAA8B,CAAC,CAAA,CACpD,CAAC,CAAA,CACC,EAELD,EAAA,MAAA,CAAKV,UAAW,+BAA+BY,SAC5CP,CAAAA,GACCQ,EAACG,EAAM,CACLf,QAAQ,WACRD,UAAW,8BACXiB,QAASZ,EAAOY,QAChB,aAAYZ,EAAOa,MAAMN,SAExBP,EAAOa,KAAAA,CACF,EAGVL,EAACG,EAAM,CACLd,KAAMW,EAACM,EAAI,CAACC,OAAQC,EAAOC,KAAK,KAAKC,OAAO,GAAA,CAAK,EACjDvB,UAAU,sCACVC,QAAQ,UACRgB,QAASb,EACT,aAAYG,EAAaE,OAAAA,CAC1B,CAAC,CAAA,CACC,CAAC,CAAA,CACH,CAET,EC1Eae,EAERlB,GAAA,CACH,KAAM,CAACmB,EAAUC,CAAW,EAAIC,EAAkB,EAAK,EAEvDC,EAAU,IAAM,CACd,MAAMC,EAAeC,EAAOC,GAAG,QAAmBC,GAAA,EAC5CA,GAAAA,YAAAA,EAAMZ,UAAW,aAAcY,GAAAA,YAAAA,EAAMC,QAAS,WAChDP,EAAY,EAAI,CAClB,CACD,EACD,MAAO,IAAM,CACXG,GAAAA,MAAAA,EAAcK,KAAI,CAEtB,EAAG,CAAE,CAAA,EAEL,MAAM9B,EAAYA,IAAM,CACtBsB,EAAY,EAAK,CAAA,EAGbnB,EAAeC,EAAQ,CAC3BL,QAAS,sCACTe,MAAO,mCAAA,CACR,EAED,OAAKO,EAGHZ,EAACd,EAAW,CAAA,GACNO,EACJ,cAAY,eACZJ,KAAMW,EAACM,EAAI,CAACC,OAAQe,CAAAA,CAAgB,EACpChC,QAASU,EAAA,OAAA,CAAAD,SAAOL,EAAaJ,OAAAA,CAAc,EAC3CC,UAAAA,EACAH,QAAQ,SAAA,CACT,EAVmB,IAYxB"}