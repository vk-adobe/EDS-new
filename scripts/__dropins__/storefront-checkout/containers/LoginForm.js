import*as e from"@dropins/tools/event-bus.js";import*as t from"@dropins/tools/fetch-graphql.js";export const id=9160;export const ids=[9160];export const modules={8884:(e,t,r)=>{r.d(t,{i:()=>n});var n=e=>e.reduce(((e,t)=>{if(!t)return e;if("string"==typeof t&&(e+=" ".concat(t)),Array.isArray(t)){var[r,n]=t;r&&n&&(e+=" ".concat(r))}return e}),"").trim()},9496:(e,t,r)=>{r.d(t,{s:()=>c});var n=r(3584),o=r(3760),i=r(764),a=r(1092);function l(e,t,r,n,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}var c=function(){var e,t=(e=function*(e){if(!e)throw new o.ET;var{data:t,errors:r}=yield(0,n.CA)("\n  query isEmailAvailable($email: String!) {\n    isEmailAvailable(email: $email) {\n      is_email_available\n    }\n  }\n",{method:"GET",cache:"no-cache",variables:{email:e}}).catch(a.i);return r&&(0,i.Y)(r),(e=>Boolean(null==e?void 0:e.is_email_available))(t.isEmailAvailable)},function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){l(i,n,o,a,c,"next",e)}function c(e){l(i,n,o,a,c,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}()},4628:(e,t,r)=>{r.d(t,{S:()=>s});var n=r(3760),o=r(3112),i="\n  mutation setGuestEmail($cartId: String!, $email: String!) {\n    setGuestEmailOnCart(input: { cart_id: $cartId, email: $email }) {\n      cart {\n        id\n        ...CheckoutData\n        ...CartSummaryItems\n      }\n    }\n  }\n  ".concat(o.e2,"\n  ").concat(o.Qz,"\n"),a=r(9120),l=r(6824);function c(e,t,r,n,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}var s=function(){var e,t=(e=function*(e){var{cartId:t,email:r}=e;if(!t)throw new n.Ij;return yield(0,a.m)({type:"mutation",query:i,options:{variables:{cartId:t,email:r}},path:"setGuestEmailOnCart.cart",signalType:"cart",transformer:l.o})},function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){c(i,n,o,a,l,"next",e)}function l(e){c(i,n,o,a,l,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}()},2216:(e,t,r)=>{r.d(t,{_:()=>y});var n=r(5536),o=r.n(n),i=r(7008),a=r.n(i),l=r(1496),c=r.n(l),s=r(9356),m=r.n(s),u=r(9904),d=r.n(u),p=r(7696),f={attributes:{"data-dropin":"storefront-checkout","data-sdk":"0.21.2"}};f.styleTagTransform=function(e,t){setTimeout((()=>{window.window._loadedStyles=window.window._loadedStyles??{};const{core:r,sdk:n}=function(e,t){const r=e?.match(/^\.dropin-(\w+)/)?.[1],n=t.getAttribute("data-sdk");return{core:r,sdk:n}}(e,t),o=r?`sdk/${r}`:t.getAttribute("data-dropin");!function(e,t){e.setAttribute("data-dropin",t),e.removeAttribute("data-sdk")}(t,o);const i=window._loadedStyles[o];i?function(e,t,r,n){const o=function(e,t){const r=e=>{const[t,r]=e.split("-"),[n,o,i]=t.split(".").map(Number),a=r?r.match(/(alpha|beta)(\d*)/):null;return{major:n,minor:o,patch:i,preType:a?a[1]:"",preNumber:a?parseInt(a[2],10):0}},n=r(e),o=r(t);if(n.major!==o.major)return n.major>o.major?e:t;if(n.minor!==o.minor)return n.minor>o.minor?e:t;if(n.patch!==o.patch)return n.patch>o.patch?e:t;if(n.preType&&o.preType)return n.preType===o.preType?n.preNumber>o.preNumber?e:t:"beta"===n.preType?t:e;return n.preType?t:e}(r,n.sdk);if(!n.core||n.core&&o===n.sdk){const t=n.style.textContent;n.style.textContent=`${t}\n/* --- MERGED --- */\n${e}`}else n.core&&o!==n.sdk&&(n.style.textContent=`/* --- UPGRADED --- */\n${e}`);t.remove()}(e,t,n,i):(function(e,t,r,n,o){t.textContent=e,window._loadedStyles[o]={sdk:n,core:r,style:t}}(e,t,r,n,o),function(e,t){const r=document.querySelector("head"),{lastDropinStyleInjected:n,lastSDKStyleInjected:o}=window._loadedStyles;t?(o?r.insertBefore(e,o.nextSibling):r.insertBefore(e,r.firstChild),window._loadedStyles.lastSDKStyleInjected=e):(n?r.insertBefore(e,n.nextSibling):o?r.insertBefore(e,o.nextSibling):r.insertBefore(e,r.firstChild),window._loadedStyles.lastDropinStyleInjected=e)}(t,r))}),0)},f.setAttributes=m(),f.insert=c().bind(null,"head"),f.domAPI=a(),f.insertStyleElement=d();o()(p.c,f);p.c&&p.c.locals&&p.c.locals;var g=r(9888),y=e=>{var{className:t,children:r,level:n=2}=e,o=n>=1&&n<=6?"h".concat(n):"h2";return(0,g.im)(o,{className:t,children:r})}},2408:(e,t,r)=>{r.d(t,{u:()=>$});var n=r(9496),o=r(4628),i=r(2216),a=r(8300),l=r(9888),c=()=>(0,l.YH)("p",{className:"checkout-login-form__signIn",children:[(0,l.im)(a.a,{id:"Checkout.LoginForm.account"}),(0,l.im)("a",{className:"checkout-login-form__link",href:"#",target:"_blank",rel:"noreferrer",children:(0,l.im)(a.a,{id:"Checkout.LoginForm.signIn"})})]}),s=r(4248),m=r(9400),u=e=>{var{value:t,error:r,hint:n,onChange:o,onBlur:i,onInvalid:c}=e,u=(0,a.cF)({LoginFormLabel:"Checkout.LoginForm.ariaLabel",LoginFormFloatingLabel:"Checkout.LoginForm.floatingLabel",LoginFormPlaceholder:"Checkout.LoginForm.placeholder"});return(0,l.im)(s.I,{size:"medium",error:r,hint:n,children:(0,l.im)(m.E,{id:"customer-email",name:"userName",type:"email",value:t,autocomplete:"email",placeholder:u.LoginFormPlaceholder,floatingLabel:u.LoginFormFloatingLabel,onChange:o,onBlur:i,onInvalid:c,required:!0,"aria-label":u.LoginFormLabel,"aria-required":!0})})},d=r(5536),p=r.n(d),f=r(7008),g=r.n(f),y=r(1496),v=r.n(y),h=r(9356),b=r.n(h),w=r(9904),j=r.n(w),E=r(6004),O={attributes:{"data-dropin":"storefront-checkout","data-sdk":"0.21.2"}};O.styleTagTransform=function(e,t){setTimeout((()=>{window.window._loadedStyles=window.window._loadedStyles??{};const{core:r,sdk:n}=function(e,t){const r=e?.match(/^\.dropin-(\w+)/)?.[1],n=t.getAttribute("data-sdk");return{core:r,sdk:n}}(e,t),o=r?`sdk/${r}`:t.getAttribute("data-dropin");!function(e,t){e.setAttribute("data-dropin",t),e.removeAttribute("data-sdk")}(t,o);const i=window._loadedStyles[o];i?function(e,t,r,n){const o=function(e,t){const r=e=>{const[t,r]=e.split("-"),[n,o,i]=t.split(".").map(Number),a=r?r.match(/(alpha|beta)(\d*)/):null;return{major:n,minor:o,patch:i,preType:a?a[1]:"",preNumber:a?parseInt(a[2],10):0}},n=r(e),o=r(t);if(n.major!==o.major)return n.major>o.major?e:t;if(n.minor!==o.minor)return n.minor>o.minor?e:t;if(n.patch!==o.patch)return n.patch>o.patch?e:t;if(n.preType&&o.preType)return n.preType===o.preType?n.preNumber>o.preNumber?e:t:"beta"===n.preType?t:e;return n.preType?t:e}(r,n.sdk);if(!n.core||n.core&&o===n.sdk){const t=n.style.textContent;n.style.textContent=`${t}\n/* --- MERGED --- */\n${e}`}else n.core&&o!==n.sdk&&(n.style.textContent=`/* --- UPGRADED --- */\n${e}`);t.remove()}(e,t,n,i):(function(e,t,r,n,o){t.textContent=e,window._loadedStyles[o]={sdk:n,core:r,style:t}}(e,t,r,n,o),function(e,t){const r=document.querySelector("head"),{lastDropinStyleInjected:n,lastSDKStyleInjected:o}=window._loadedStyles;t?(o?r.insertBefore(e,o.nextSibling):r.insertBefore(e,r.firstChild),window._loadedStyles.lastSDKStyleInjected=e):(n?r.insertBefore(e,n.nextSibling):o?r.insertBefore(e,o.nextSibling):r.insertBefore(e,r.firstChild),window._loadedStyles.lastDropinStyleInjected=e)}(t,r))}),0)},O.setAttributes=b(),O.insert=v().bind(null,"head"),O.domAPI=g(),O.insertStyleElement=j();p()(E.c,O);E.c&&E.c.locals&&E.c.locals;var S=r(8884),k=["name","className","currentEmail","hint","error","onEmailChange","onEmailBlur","onEmailInvalid"];function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){C(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var P=e=>{var{name:t,className:r,currentEmail:n,hint:o,error:s=null,onEmailChange:m,onEmailBlur:d,onEmailInvalid:p}=e,f=I(e,k),g=(0,a.cF)({Title:"Checkout.LoginForm.title"});return(0,l.YH)("div",x(x({},f),{},{className:(0,S.i)(["checkout-login-form",r]),children:[(0,l.YH)("div",{className:"checkout-login-form__heading",children:[(0,l.im)(i._,{level:2,className:"checkout-login-form__title",children:g.Title}),(0,l.im)(c,{})]}),(0,l.im)("div",{className:"checkout-login-form__content",children:(0,l.YH)("form",{className:(0,S.i)(["dropin-login-form__form",r]),name:t,noValidate:!0,children:[(0,l.im)("button",{type:"submit",disabled:!0,style:"display: none","aria-hidden":"true"}),(0,l.im)(u,{value:n||void 0,error:s||"",hint:o,onChange:m,onBlur:d,onInvalid:p})]})})]}))},L=r(9392),F=r(2248),T=r(5668),N=["className","email"];function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var $=e=>{var{className:t,email:r=null}=e,i=B(e,N),c=(0,a.cF)({LoginFormInvalidEmailError:"Checkout.LoginForm.invalidEmailError",LoginFormMissingEmailError:"Checkout.LoginForm.missingEmailError",LoginFormEmailExists:"Checkout.LoginForm.emailExists"}),{data:s}=T.cartSignal.value,m=(null==s?void 0:s.id)||"",u=!!s,[d,p]=(0,L.oT)(!1),[f,g]=(0,L.oT)(r),[y,v]=(0,L.oT)(),[h,b]=(0,L.oT)(!0),w=e=>e.valid?null:e.valueMissing?c.LoginFormMissingEmailError:c.LoginFormInvalidEmailError;return!d&&u&&(p(!0),g((null==s?void 0:s.email)||r)),(0,L.YB)((()=>{if(f&&!y&&(null==s?void 0:s.email)!==f){var e=setTimeout((()=>{(0,n.s)(f).then((e=>{b(e),(0,o.S)({cartId:m,email:f}).catch((e=>{console.log("set email failed",e)}))})).catch((e=>{console.log(e),v(c.LoginFormInvalidEmailError),b(!0)}))}),1e3);return()=>{e&&clearTimeout(e)}}}),[f,y,c.LoginFormInvalidEmailError,null==s?void 0:s.email,m]),(0,l.im)(P,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({className:t,currentEmail:f,error:y,hint:h?"":c.LoginFormEmailExists,name:F.i,onEmailBlur:e=>{var{validity:t}=e.target;v(w(t))},onEmailChange:e=>{var{value:t}=e.target;g(t),v(null),b(!0)},onEmailInvalid:e=>{var{validity:t}=e.target;v(w(t))}},i))}},2248:(e,t,r)=>{r.d(t,{i:()=>n});var n="login-form"},5600:(e,t,r)=>{r.d(t,{cp:()=>o.u,iO:()=>n.i,uY:()=>o.u});var n=r(2248),o=r(2408)},7696:(e,t,r)=>{r.d(t,{c:()=>l});var n=r(6008),o=r.n(n),i=r(2076),a=r.n(i)()(o());a.push([e.id,"\n",""]);const l=a},6004:(e,t,r)=>{r.d(t,{c:()=>l});var n=r(6008),o=r.n(n),i=r(2076),a=r.n(i)()(o());a.push([e.id,".checkout-login-form{\n    display:grid;\n}\n\n.checkout-login-form__heading{\n    display:grid;\n    grid-template-columns:repeat(2, 1fr [col-start]);\n    grid-auto-rows:max-content;\n}\n\n.checkout-login-form__content{\n    grid-auto-rows:max-content;\n}\n\n.checkout-login-form__title{\n    grid-column-start:1;\n    color:var(--color-neutral-800);\n    font:var(--type-headline-2-default-font);\n    letter-spacing:var(--type-headline-2-default-letter-spacing);\n    margin:0;\n}\n\n.checkout-login-form__signIn{\n    grid-column-start:2;\n    color:var(--color-neutral-800);\n    font:var(--type-body-2-default-font);\n    letter-spacing:var(--type-body-2-default-letter-spacing);\n    margin-bottom:var(--spacing-medium);\n    align-self:flex-end;\n    justify-self:flex-end;\n    margin-top:var(--spacing-xxsmall);\n}\n\na.checkout-login-form__link{\n    font:var(--type-body-2-strong-font);\n    margin-left:var(--spacing-xxsmall);\n}\n@media only screen and (min-width:320px) and (max-width: 768px){\n    .checkout-login-form__heading{\n        grid-template-columns:repeat(1, 1fr [col-start]);\n        grid-template-rows:1fr;\n    }\n\n    .checkout-login-form__signIn{\n        grid-column-start:1;\n        align-self:flex-start;\n        justify-self:flex-start;\n        padding-top:var(--spacing-xsmall);\n    }\n}\n",""]);const l=a},8122:(t,r,n)=>{t.exports=(e=>{var t={};return n.d(t,e),t})({events:()=>e.events})},8616:(e,r,n)=>{e.exports=(e=>{var t={};return n.d(t,e),t})({FetchGraphQL:()=>t.FetchGraphQL})}};import r from"../runtime.js";import*as n from"../9888.js";r.C(n);import*as o from"../2172.js";r.C(o);import*as i from"../8668.js";r.C(i);import*as a from"../5068.js";r.C(a);import*as l from"../7940.js";r.C(l);import*as c from"./LoginForm.js";r.C(c);var s,m=(s=5600,r(r.s=s)),u=m.iO,d=m.uY,p=m.cp;export{u as LOGIN_FORM_NAME,d as LoginForm,p as default};