import*as e from"@dropins/tools/event-bus.js";import*as t from"@dropins/tools/fetch-graphql.js";export const id=2655;export const ids=[2655];export const modules={5444:(e,t,r)=>{r.d(t,{L:()=>n});var n=e=>e.reduce(((e,t)=>{if(!t)return e;if("string"==typeof t&&(e+=" ".concat(t)),Array.isArray(t)){var[r,n]=t;r&&n&&(e+=" ".concat(r))}return e}),"").trim()},3525:(e,t,r)=>{r.d(t,{w:()=>s});var n=r(294),o=r(2838),i=r(6129),a=r(5883);function l(e,t,r,n,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(n,o)}var s=function(){var e,t=(e=function*(e){if(!e)throw new o.Xf;var{data:t,errors:r}=yield(0,n.AZ)("\n  query isEmailAvailable($email: String!) {\n    isEmailAvailable(email: $email) {\n      is_email_available\n    }\n  }\n",{method:"GET",cache:"no-cache",variables:{email:e}}).catch(a.n);return r&&(0,i.E)(r),(e=>Boolean(null==e?void 0:e.is_email_available))(t.isEmailAvailable)},function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){l(i,n,o,a,s,"next",e)}function s(e){l(i,n,o,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}()},5268:(e,t,r)=>{r.d(t,{k:()=>c});var n=r(2838),o=r(9175),i="\n  mutation setGuestEmail($cartId: String!, $email: String!) {\n    setGuestEmailOnCart(input: { cart_id: $cartId, email: $email }) {\n      cart {\n        id\n        ...CheckoutData\n        ...CartSummaryItems\n      }\n    }\n  }\n  ".concat(o.fi,"\n  ").concat(o.Bc,"\n"),a=r(5048),l=r(1831);function s(e,t,r,n,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(n,o)}var c=function(){var e,t=(e=function*(e){var{cartId:t,email:r}=e;if(!t)throw new n.Nc;return yield(0,a.X)({type:"mutation",query:i,options:{variables:{cartId:t,email:r}},path:"setGuestEmailOnCart.cart",signalType:"cart",transformer:l.D})},function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){s(i,n,o,a,l,"next",e)}function l(e){s(i,n,o,a,l,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}()},3214:(e,t,r)=>{r.d(t,{D:()=>y});var n=r(5292),o=r.n(n),i=r(9893),a=r.n(i),l=r(9383),s=r.n(l),c=r(8296),u=r.n(c),m=r(9088),d=r.n(m),p=r(7536),f={attributes:{"data-dropin":"storefront-checkout","data-sdk":"0.21.2"}};f.styleTagTransform=function(e,t){setTimeout((()=>{window.window._loadedStyles=window.window._loadedStyles??{};const{core:r,sdk:n}=function(e,t){const r=e?.match(/^\.dropin-(\w+)/)?.[1],n=t.getAttribute("data-sdk");return{core:r,sdk:n}}(e,t),o=r?`sdk/${r}`:t.getAttribute("data-dropin");!function(e,t){e.setAttribute("data-dropin",t),e.removeAttribute("data-sdk")}(t,o);const i=window._loadedStyles[o];i?function(e,t,r,n){const o=function(e,t){const r=e=>{const[t,r]=e.split("-"),[n,o,i]=t.split(".").map(Number),a=r?r.match(/(alpha|beta)(\d*)/):null;return{major:n,minor:o,patch:i,preType:a?a[1]:"",preNumber:a?parseInt(a[2],10):0}},n=r(e),o=r(t);if(n.major!==o.major)return n.major>o.major?e:t;if(n.minor!==o.minor)return n.minor>o.minor?e:t;if(n.patch!==o.patch)return n.patch>o.patch?e:t;if(n.preType&&o.preType)return n.preType===o.preType?n.preNumber>o.preNumber?e:t:"beta"===n.preType?t:e;return n.preType?t:e}(r,n.sdk);if(!n.core||n.core&&o===n.sdk){const t=n.style.textContent;n.style.textContent=`${t}\n/* --- MERGED --- */\n${e}`}else n.core&&o!==n.sdk&&(n.style.textContent=`/* --- UPGRADED --- */\n${e}`);t.remove()}(e,t,n,i):(function(e,t,r,n,o){t.textContent=e,window._loadedStyles[o]={sdk:n,core:r,style:t}}(e,t,r,n,o),function(e,t){const r=document.querySelector("head"),{lastDropinStyleInjected:n,lastSDKStyleInjected:o}=window._loadedStyles;t?(o?r.insertBefore(e,o.nextSibling):r.insertBefore(e,r.firstChild),window._loadedStyles.lastSDKStyleInjected=e):(n?r.insertBefore(e,n.nextSibling):o?r.insertBefore(e,o.nextSibling):r.insertBefore(e,r.firstChild),window._loadedStyles.lastDropinStyleInjected=e)}(t,r))}),0)},f.setAttributes=u(),f.insert=s().bind(null,"head"),f.domAPI=a(),f.insertStyleElement=d();o()(p.A,f);p.A&&p.A.locals&&p.A.locals;var g=r(556),y=e=>{var{className:t,children:r,level:n=2}=e,o=n>=1&&n<=6?"h".concat(n):"h2";return(0,g.Y)(o,{className:t,children:r})}},8295:(e,t,r)=>{r.d(t,{Q:()=>Y});var n=r(3525),o=r(5268),i=r(3214),a=r(8422),l=r(556),s=()=>(0,l.FD)("p",{className:"checkout-login-form__signIn",children:[(0,l.Y)(a.EY,{id:"Checkout.LoginForm.account"}),(0,l.Y)("a",{className:"checkout-login-form__link",href:"#",target:"_blank",rel:"noreferrer",children:(0,l.Y)(a.EY,{id:"Checkout.LoginForm.signIn"})})]}),c=r(2962),u=r(1329),m=e=>{var{value:t,error:r,hint:n,onChange:o,onBlur:i,onInvalid:s}=e,m=(0,a.FV)({LoginFormLabel:"Checkout.LoginForm.ariaLabel",LoginFormFloatingLabel:"Checkout.LoginForm.floatingLabel",LoginFormPlaceholder:"Checkout.LoginForm.placeholder"});return(0,l.Y)(c.D,{size:"medium",error:r,hint:n,children:(0,l.Y)(u.p,{id:"customer-email",name:"userName",type:"email",value:t,autocomplete:"email",placeholder:m.LoginFormPlaceholder,floatingLabel:m.LoginFormFloatingLabel,onChange:o,onBlur:i,onInvalid:s,required:!0,"aria-label":m.LoginFormLabel,"aria-required":!0})})},d=r(5292),p=r.n(d),f=r(9893),g=r.n(f),y=r(9383),v=r.n(y),h=r(8296),b=r.n(h),w=r(9088),j=r.n(w),E=r(5232),O={attributes:{"data-dropin":"storefront-checkout","data-sdk":"0.21.2"}};O.styleTagTransform=function(e,t){setTimeout((()=>{window.window._loadedStyles=window.window._loadedStyles??{};const{core:r,sdk:n}=function(e,t){const r=e?.match(/^\.dropin-(\w+)/)?.[1],n=t.getAttribute("data-sdk");return{core:r,sdk:n}}(e,t),o=r?`sdk/${r}`:t.getAttribute("data-dropin");!function(e,t){e.setAttribute("data-dropin",t),e.removeAttribute("data-sdk")}(t,o);const i=window._loadedStyles[o];i?function(e,t,r,n){const o=function(e,t){const r=e=>{const[t,r]=e.split("-"),[n,o,i]=t.split(".").map(Number),a=r?r.match(/(alpha|beta)(\d*)/):null;return{major:n,minor:o,patch:i,preType:a?a[1]:"",preNumber:a?parseInt(a[2],10):0}},n=r(e),o=r(t);if(n.major!==o.major)return n.major>o.major?e:t;if(n.minor!==o.minor)return n.minor>o.minor?e:t;if(n.patch!==o.patch)return n.patch>o.patch?e:t;if(n.preType&&o.preType)return n.preType===o.preType?n.preNumber>o.preNumber?e:t:"beta"===n.preType?t:e;return n.preType?t:e}(r,n.sdk);if(!n.core||n.core&&o===n.sdk){const t=n.style.textContent;n.style.textContent=`${t}\n/* --- MERGED --- */\n${e}`}else n.core&&o!==n.sdk&&(n.style.textContent=`/* --- UPGRADED --- */\n${e}`);t.remove()}(e,t,n,i):(function(e,t,r,n,o){t.textContent=e,window._loadedStyles[o]={sdk:n,core:r,style:t}}(e,t,r,n,o),function(e,t){const r=document.querySelector("head"),{lastDropinStyleInjected:n,lastSDKStyleInjected:o}=window._loadedStyles;t?(o?r.insertBefore(e,o.nextSibling):r.insertBefore(e,r.firstChild),window._loadedStyles.lastSDKStyleInjected=e):(n?r.insertBefore(e,n.nextSibling):o?r.insertBefore(e,o.nextSibling):r.insertBefore(e,r.firstChild),window._loadedStyles.lastDropinStyleInjected=e)}(t,r))}),0)},O.setAttributes=b(),O.insert=v().bind(null,"head"),O.domAPI=g(),O.insertStyleElement=j();p()(E.A,O);E.A&&E.A.locals&&E.A.locals;var k=r(5444),S=["name","className","currentEmail","hint","error","onEmailChange","onEmailBlur","onEmailInvalid"];function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){L(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function L(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var F=e=>{var{name:t,className:r,currentEmail:n,hint:o,error:c=null,onEmailChange:u,onEmailBlur:d,onEmailInvalid:p}=e,f=C(e,S),g=(0,a.FV)({Title:"Checkout.LoginForm.title"});return(0,l.FD)("div",x(x({},f),{},{className:(0,k.L)(["checkout-login-form",r]),children:[(0,l.FD)("div",{className:"checkout-login-form__heading",children:[(0,l.Y)(i.D,{level:2,className:"checkout-login-form__title",children:g.Title}),(0,l.Y)(s,{})]}),(0,l.Y)("div",{className:"checkout-login-form__content",children:(0,l.FD)("form",{className:(0,k.L)(["dropin-login-form__form",r]),name:t,noValidate:!0,children:[(0,l.Y)("button",{type:"submit",disabled:!0,style:"display: none","aria-hidden":"true"}),(0,l.Y)(m,{value:n||void 0,error:c||"",hint:o,onChange:u,onBlur:d,onInvalid:p})]})})]}))},P=r(172),I=r(2094),A=r(984),D=["className","email"];function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var Y=e=>{var{className:t,email:r=null}=e,i=B(e,D),s=(0,a.FV)({LoginFormInvalidEmailError:"Checkout.LoginForm.invalidEmailError",LoginFormMissingEmailError:"Checkout.LoginForm.missingEmailError",LoginFormEmailExists:"Checkout.LoginForm.emailExists"}),{data:c}=A.D.value,u=(null==c?void 0:c.id)||"",m=!!c,[d,p]=(0,P.J0)(!1),[f,g]=(0,P.J0)(r),[y,v]=(0,P.J0)(),[h,b]=(0,P.J0)(!0),w=e=>e.valid?null:e.valueMissing?s.LoginFormMissingEmailError:s.LoginFormInvalidEmailError;return!d&&m&&(p(!0),g((null==c?void 0:c.email)||r)),(0,P.vJ)((()=>{if(f&&!y&&(null==c?void 0:c.email)!==f){var e=setTimeout((()=>{(0,n.w)(f).then((e=>{b(e),(0,o.k)({cartId:u,email:f}).catch((e=>{console.log("set email failed",e)}))})).catch((e=>{console.log(e),v(s.LoginFormInvalidEmailError),b(!0)}))}),1e3);return()=>{e&&clearTimeout(e)}}}),[f,y,s.LoginFormInvalidEmailError,null==c?void 0:c.email,u]),(0,l.Y)(F,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){N(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({className:t,currentEmail:f,error:y,hint:h?"":s.LoginFormEmailExists,name:I.r,onEmailBlur:e=>{var{validity:t}=e.target;v(w(t))},onEmailChange:e=>{var{value:t}=e.target;g(t),v(null),b(!0)},onEmailInvalid:e=>{var{validity:t}=e.target;v(w(t))}},i))}},2094:(e,t,r)=>{r.d(t,{r:()=>n});var n="login-form"},5859:(e,t,r)=>{r.d(t,{Ay:()=>o.Q,QB:()=>o.Q,rT:()=>n.r});var n=r(2094),o=r(8295)},7536:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(8645),o=r.n(n),i=r(278),a=r.n(i)()(o());a.push([e.id,"\n",""]);const l=a},5232:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(8645),o=r.n(n),i=r(278),a=r.n(i)()(o());a.push([e.id,".checkout-login-form{\n    display:grid;\n}\n\n.checkout-login-form__heading{\n    display:grid;\n    grid-template-columns:repeat(2, 1fr [col-start]);\n    grid-auto-rows:max-content;\n}\n\n.checkout-login-form__content{\n    grid-auto-rows:max-content;\n}\n\n.checkout-login-form__title{\n    grid-column-start:1;\n    color:var(--color-neutral-800);\n    font:var(--type-headline-2-default-font);\n    letter-spacing:var(--type-headline-2-default-letter-spacing);\n    margin:0;\n}\n\n.checkout-login-form__signIn{\n    grid-column-start:2;\n    color:var(--color-neutral-800);\n    font:var(--type-body-2-default-font);\n    letter-spacing:var(--type-body-2-default-letter-spacing);\n    margin-bottom:var(--spacing-medium);\n    align-self:flex-end;\n    justify-self:flex-end;\n    margin-top:var(--spacing-xxsmall);\n}\n\na.checkout-login-form__link{\n    font:var(--type-body-2-strong-font);\n    margin-left:var(--spacing-xxsmall);\n}\n@media only screen and (min-width:320px) and (max-width: 768px){\n    .checkout-login-form__heading{\n        grid-template-columns:repeat(1, 1fr [col-start]);\n        grid-template-rows:1fr;\n    }\n\n    .checkout-login-form__signIn{\n        grid-column-start:1;\n        align-self:flex-start;\n        justify-self:flex-start;\n        padding-top:var(--spacing-xsmall);\n    }\n}\n",""]);const l=a},1178:(t,r,n)=>{t.exports=(e=>{var t={};return n.d(t,e),t})({events:()=>e.events})},5867:(e,r,n)=>{e.exports=(e=>{var t={};return n.d(t,e),t})({FetchGraphQL:()=>t.FetchGraphQL})}};import r from"../runtime.js";import*as n from"../556.js";r.C(n);import*as o from"../3178.js";r.C(o);import*as i from"../7878.js";r.C(i);import*as a from"../2362.js";r.C(a);import*as l from"../4316.js";r.C(l);import*as s from"./LoginForm.js";r.C(s);var c,u=(c=5859,r(r.s=c)),m=u.rT,d=u.QB,p=u.Ay;export{m as LOGIN_FORM_NAME,d as LoginForm,p as default};