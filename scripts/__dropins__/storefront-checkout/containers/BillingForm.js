import*as e from"@dropins/tools/event-bus.js";import*as t from"@dropins/tools/fetch-graphql.js";export const id=5340;export const ids=[5340];export const modules={8572:(e,t,r)=>{r.d(t,{_:()=>G,i:()=>z});var i=r(2532),n=r(4944),o=r(3792),l=r(3388),s=r(8412),a=()=>(0,s.im)(l.W,{className:"bill-to-shipping-address__skeleton",children:(0,s.im)(l.K,{variant:"row",size:"small"})}),c=r(5536),d=r.n(c),p=r(7008),u=r.n(p),f=r(1496),b=r.n(f),g=r(9356),v=r.n(g),y=r(9904),m=r.n(y),h=r(9960),O={attributes:{"data-dropin":"storefront-checkout","data-sdk":"0.21.2"},styleTagTransform:function(e,t){window._loadedStyles=window._loadedStyles??{};const r=e?.match(/^\.dropin-(\w+)/)?.[1],i=t.getAttribute("data-sdk"),n=r?`sdk/${r}`:t.getAttribute("data-dropin");t.setAttribute("data-dropin",n),t.removeAttribute("data-sdk");const o=window._loadedStyles[n];if(o){const n=function(e,t){const[r,i]=e.split("-"),[n,o]=t.split("-"),l=[...r.split("."),i],s=[...n.split("."),o],a=parseInt(l[0],10),c=parseInt(s[0],10);if(a!==c)return a>c?e:t;const d=parseInt(l[1],10),p=parseInt(s[1],10);if(d!==p)return d>p?e:t;const u=parseInt(l[2],10),f=parseInt(s[2],10);if(u!==f)return u>f?e:t;if(l[3]&&s[3]){const r=/(alpha|beta)(.*)/,i=l[3].match(r),n=s[3].match(r),o=i[1],a=n[1],c=parseInt(i[2],10),d=parseInt(n[2],10);if(o===a)return c>d?e:t;if("alpha"===o&&"beta"===a)return t;if("beta"===o&&"alpha"===a)return e}return l[3]?t:e}(i,o.sdk);if(!r||r&&n===o.sdk){const t=o.style.textContent;o.style.textContent=`${t}\n/* --- MERGED --- */\n${e}`}else r&&n!==o.sdk&&(o.style.textContent=`/* --- UPGRADED --- */\n${e}`);return void t.remove()}t.textContent=e,window._loadedStyles[n]={sdk:i,core:r,style:t};const l=document.querySelector("head"),{lastDropinStyleInjected:s,lastSDKStyleInjected:a}=window._loadedStyles;r?(a?l.insertBefore(t,a.nextSibling):l.insertBefore(t,l.firstChild),window._loadedStyles.lastSDKStyleInjected=t):(s?l.insertBefore(t,s.nextSibling):a?l.insertBefore(t,a.nextSibling):l.insertBefore(t,l.firstChild),window._loadedStyles.lastDropinStyleInjected=t)}};O.setAttributes=v(),O.insert=b().bind(null,"head"),O.domAPI=u(),O.insertStyleElement=m();d()(h.c,O);h.c&&h.c.locals&&h.c.locals;var j=r(2460),S=["className","isInitialized","checked"];function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var _=e=>{var{className:t,isInitialized:r=!0,checked:i=!0}=e,l=I(e,S),c=(0,j.cF)({title:"Checkout.BillToShippingAddress.title"});return r?(0,s.im)("div",{className:(0,n.i)(["checkout-bill-to-shipping-address",t]),children:(0,s.im)(o.y,k({"data-testid":"bill-to-shipping-checkbox",className:"checkout-bill-to-shipping-address__checkbox",checked:i,name:"checkout-bill-to-shipping-address__checkbox",label:c.title},l))}):(0,s.im)(a,{})},B=r(5668),x=r(9488),A=r(2796),C=r(40),D=r(2236),E=["children"];function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){N(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function N(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function z(e,t,r){return!t&&!r||!(!t||!r)&&e.every((e=>{var i=e.code;return function(e,t,r){var i=e[r],n=t[r];return void 0===i&&void 0===n||null===i&&null===n||("object"==typeof i&&"object"==typeof n?JSON.stringify(i)===JSON.stringify(n):i===n)}(t,r,i)}))}var G=e=>{var{children:t}=e,r=F(e,E),{data:n}=B.cartSignal.value,o=(null==n?void 0:n.id)||"",l=x.isBillToShippingSignal.value.checked,{isInitialized:a}=(e=>{var t,{isBillToShipping:r}=e,[i,n]=(0,A.oT)(!1),{fields:o}=(0,D.q)(),l=B.cartSignal.value.data,s=!!l,a=null==l?void 0:l.billingAddress,c=null==l||null===(t=l.shippingAddresses)||void 0===t?void 0:t[0];return(0,A.YB)((()=>{if(o){var e=localStorage.getItem(C.c);if(!i&&e)return n(!0),void(r.value={checked:"true"===e,setByUser:!1});if(!i&&s){n(!0);var t=z(o,a,c);r.value={checked:null!=l&&l.billingAddress?t:r.value.checked,setByUser:!1}}}}),[a,null==l?void 0:l.billingAddress,o,s,r,i,c]),{isInitialized:i}})({isBillToShipping:x.isBillToShippingSignal});return(0,s.im)(_,M(M({},r),{},{checked:l,isInitialized:a,onChange:e=>{var t,r=e.target.checked,n=B.cartSignal.value.data,l=Boolean(null==n||null===(t=n.shippingAddresses)||void 0===t?void 0:t[0]);if(x.isBillToShippingSignal.value={checked:r,setByUser:!0},localStorage.setItem(C.c,r.toString()),a&&r&&l){var s=new AbortController;return(0,i.W)({signal:s.signal,cartId:o,input:{same_as_shipping:!0}}).catch((e=>{console.error(e)})),()=>{s.abort()}}},disabled:B.cartSignal.value.pending}))}},40:(e,t,r)=>{r.d(t,{c:()=>i});var i="is_bill_to_shipping_address"},2872:(e,t,r)=>{r.d(t,{M:()=>v});var i=r(2532),n=r(5124),o=r(8488),l=r(8572),s=r(6476),a=r(2236),c=r(5668),d=r(9488),p=r(2796),u=r(8412);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=e=>{var{fields:t}=(0,a.q)(),r=(0,p.yK)(null),{data:f}=c.cartSignal.value,g=(null==f?void 0:f.id)||"",{checked:v,setByUser:y}=d.isBillToShippingSignal.value,m=!v,h=(0,p.kZ)((e=>(0,i.W)({signal:e.signal,cartId:g,input:{address:v?void 0:(0,n.ek)(e.address),same_as_shipping:v}})),[g,v]),O=(0,p.kZ)((()=>{var e,r=c.cartSignal.value.data;return!(0,l.i)(t,null==r?void 0:r.billingAddress,null==r||null===(e=r.shippingAddresses)||void 0===e?void 0:e[0])}),[t]);return(0,p.YB)((()=>{if(y){var e=new AbortController;return v||r.current.triggerSaveAddress(e.signal),()=>{e.abort()}}}),[v,y]),(0,u.im)(o.i,b(b({},e),{},{addressType:"billing_address","data-testid":"billing-form",headingId:"Checkout.BillingAddress.title",name:s.M,ref:r,saveAddressHandler:h,shouldAutoFillForm:O,style:{display:m?"block":"none"}}))}},6476:(e,t,r)=>{r.d(t,{M:()=>i});var i="billing_address"},3084:(e,t,r)=>{r.d(t,{Mh:()=>n.M,Mx:()=>i.M,cp:()=>i.M});var i=r(2872),n=r(6476)},9960:(e,t,r)=>{r.d(t,{c:()=>s});var i=r(6008),n=r.n(i),o=r(2076),l=r.n(o)()(n());l.push([e.id,".checkout-bill-to-shipping-address{\n  display:grid;\n}\n\n.checkout-bill-to-shipping-address label{\n  font:var(--type-body-2-default-font);\n  letter-spacing:var(--type-body-2-default-letter-spacing);\n  gap:0;\n}\n",""]);const s=l},8122:(t,r,i)=>{t.exports=(e=>{var t={};return i.d(t,e),t})({events:()=>e.events})},8616:(e,r,i)=>{e.exports=(e=>{var t={};return i.d(t,e),t})({FetchGraphQL:()=>t.FetchGraphQL})}};import r from"../runtime.js";import*as i from"../8412.js";r.C(i);import*as n from"../2892.js";r.C(n);import*as o from"../184.js";r.C(o);import*as l from"../196.js";r.C(l);import*as s from"../4708.js";r.C(s);import*as a from"../8668.js";r.C(a);import*as c from"../5068.js";r.C(c);import*as d from"../9700.js";r.C(d);import*as p from"../8100.js";r.C(p);import*as u from"./BillingForm.js";r.C(u);var f,b=(f=3084,r(r.s=f)),g=b.Mh,v=b.Mx,y=b.cp;export{g as BILLING_FORM_NAME,v as BillingForm,y as default};