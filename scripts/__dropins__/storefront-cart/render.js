var ge=Object.defineProperty;var me=(e,t,n)=>t in e?ge(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var te=(e,t,n)=>(me(e,typeof t!="symbol"?t+"":t,n),n);import{useState as ye,useEffect as be}from"@dropins/tools/preact-hooks.js";import{events as xe}from"@dropins/tools/event-bus.js";import{c as we}from"./getStoreConfig.js";import{jsx as T}from"@dropins/tools/preact-jsx-runtime.js";import{V as ne,d as Ce,U as Oe}from"./UIProvider.js";import{options as _,h as ce,Fragment as V,render as re}from"@dropins/tools/preact.js";import"@dropins/tools/fetch-graphql.js";import"@dropins/tools/preact-compat.js";var je=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i,pe=/^(area|base|br|col|embed|hr|img|input|link|meta|param|source|track|wbr)$/,Z=/[\s\n\\/='"\0<>]/,de=/^xlink:?./,ke=/["&<]/;function N(e){if(ke.test(e+="")===!1)return e;for(var t=0,n=0,o="",p="";n<e.length;n++){switch(e.charCodeAt(n)){case 34:p="&quot;";break;case 38:p="&amp;";break;case 60:p="&lt;";break;default:continue}n!==t&&(o+=e.slice(t,n)),o+=p,t=n+1}return n!==t&&(o+=e.slice(t,n)),o}var ie=function(e,t){return String(e).replace(/(\n+)/g,"$1"+(t||"	"))},oe=function(e,t,n){return String(e).length>40||String(e).indexOf(`
`)!==-1||String(e).indexOf("<")!==-1},se={},De=/([A-Z])/g;function _e(e){var t="";for(var n in e){var o=e[n];o!=null&&o!==""&&(t&&(t+=" "),t+=n[0]=="-"?n:se[n]||(se[n]=n.replace(De,"-$1").toLowerCase()),t=typeof o=="number"&&je.test(n)===!1?t+": "+o+"px;":t+": "+o+";")}return t||void 0}function H(e,t){return Array.isArray(t)?t.reduce(H,e):t!=null&&t!==!1&&e.push(t),e}function ae(){this.__d=!0}function ve(e,t){return{__v:e,context:t,props:e.props,setState:ae,forceUpdate:ae,__d:!0,__h:[]}}function q(e,t){var n=e.contextType,o=n&&t[n.__c];return n!=null?o?o.props.value:n.__:t}var Q=[];function $(e,t,n,o,p,v){if(e==null||typeof e=="boolean")return"";if(typeof e!="object")return typeof e=="function"?"":N(e);var d=n.pretty,u=d&&typeof d=="string"?d:"	";if(Array.isArray(e)){for(var b="",y=0;y<e.length;y++)d&&y>0&&(b+=`
`),b+=$(e[y],t,n,o,p,v);return b}if(e.constructor!==void 0)return"";var D,f=e.type,c=e.props,F=!1;if(typeof f=="function"){if(F=!0,!n.shallow||!o&&n.renderRootComponent!==!1){if(f===V){var m=[];return H(m,e.props.children),$(m,t,n,n.shallowHighOrder!==!1,p,v)}var h,r=e.__c=ve(e,t);_.__b&&_.__b(e);var L=_.__r;if(f.prototype&&typeof f.prototype.render=="function"){var j=q(f,t);(r=e.__c=new f(c,j)).__v=e,r._dirty=r.__d=!0,r.props=c,r.state==null&&(r.state={}),r._nextState==null&&r.__s==null&&(r._nextState=r.__s=r.state),r.context=j,f.getDerivedStateFromProps?r.state=Object.assign({},r.state,f.getDerivedStateFromProps(r.props,r.state)):r.componentWillMount&&(r.componentWillMount(),r.state=r._nextState!==r.state?r._nextState:r.__s!==r.state?r.__s:r.state),L&&L(e),h=r.render(r.props,r.state,r.context)}else for(var S=q(f,t),P=0;r.__d&&P++<25;)r.__d=!1,L&&L(e),h=f.call(e.__c,c,S);return r.getChildContext&&(t=Object.assign({},t,r.getChildContext())),_.diffed&&_.diffed(e),$(h,t,n,n.shallowHighOrder!==!1,p,v)}f=(D=f).displayName||D!==Function&&D.name||function(Y){var J=(Function.prototype.toString.call(Y).match(/^\s*function\s+([^( ]+)/)||"")[1];if(!J){for(var U=-1,K=Q.length;K--;)if(Q[K]===Y){U=K;break}U<0&&(U=Q.push(Y)-1),J="UnnamedComponent"+U}return J}(D)}var w,x,l="<"+f;if(c){var g=Object.keys(c);n&&n.sortAttributes===!0&&g.sort();for(var k=0;k<g.length;k++){var i=g[k],a=c[i];if(i!=="children"){if(!Z.test(i)&&(n&&n.allAttributes||i!=="key"&&i!=="ref"&&i!=="__self"&&i!=="__source")){if(i==="defaultValue")i="value";else if(i==="defaultChecked")i="checked";else if(i==="defaultSelected")i="selected";else if(i==="className"){if(c.class!==void 0)continue;i="class"}else p&&de.test(i)&&(i=i.toLowerCase().replace(/^xlink:?/,"xlink:"));if(i==="htmlFor"){if(c.for)continue;i="for"}i==="style"&&a&&typeof a=="object"&&(a=_e(a)),i[0]==="a"&&i[1]==="r"&&typeof a=="boolean"&&(a=String(a));var s=n.attributeHook&&n.attributeHook(i,a,t,n,F);if(s||s==="")l+=s;else if(i==="dangerouslySetInnerHTML")x=a&&a.__html;else if(f==="textarea"&&i==="value")w=a;else if((a||a===0||a==="")&&typeof a!="function"){if(!(a!==!0&&a!==""||(a=i,n&&n.xml))){l=l+" "+i;continue}if(i==="value"){if(f==="select"){v=a;continue}f==="option"&&v==a&&c.selected===void 0&&(l+=" selected")}l=l+" "+i+'="'+N(a)+'"'}}}else w=a}}if(d){var C=l.replace(/\n\s*/," ");C===l||~C.indexOf(`
`)?d&&~l.indexOf(`
`)&&(l+=`
`):l=C}if(l+=">",Z.test(f))throw new Error(f+" is not a valid HTML tag name in "+l);var M,he=pe.test(f)||n.voidElements&&n.voidElements.test(f),O=[];if(x)d&&oe(x)&&(x=`
`+u+ie(x,u)),l+=x;else if(w!=null&&H(M=[],w).length){for(var W=d&&~l.indexOf(`
`),I=!1,B=0;B<M.length;B++){var G=M[B];if(G!=null&&G!==!1){var A=$(G,t,n,!0,f==="svg"||f!=="foreignObject"&&p,v);if(d&&!W&&oe(A)&&(W=!0),A)if(d){var ee=A.length>0&&A[0]!="<";I&&ee?O[O.length-1]+=A:O.push(A),I=ee}else O.push(A)}}if(d&&W)for(var X=O.length;X--;)O[X]=`
`+u+ie(O[X],u)}if(O.length||x)l+=O.join("");else if(n&&n.xml)return l.substring(0,l.length-1)+" />";return!he||M||x?(d&&~l.indexOf(`
`)&&(l+=`
`),l=l+"</"+f+">"):l=l.replace(/>$/," />"),l}var Se={shallow:!0};z.render=z;var Ae=function(e,t){return z(e,t,Se)},le=[];function z(e,t,n){t=t||{};var o=_.__s;_.__s=!0;var p,v=ce(V,null);return v.__k=[e],p=n&&(n.pretty||n.voidElements||n.sortAttributes||n.shallow||n.allAttributes||n.xml||n.attributeHook)?$(e,t,n):E(e,t,!1,void 0,v),_.__c&&_.__c(e,le),_.__s=o,le.length=0,p}function R(e){return e==null||typeof e=="boolean"?null:typeof e=="string"||typeof e=="number"||typeof e=="bigint"?ce(null,null,e):e}function Fe(e,t){return e==="className"?"class":e==="htmlFor"?"for":e==="defaultValue"?"value":e==="defaultChecked"?"checked":e==="defaultSelected"?"selected":t&&de.test(e)?e.toLowerCase().replace(/^xlink:?/,"xlink:"):e}function Le(e,t){return e==="style"&&t!=null&&typeof t=="object"?_e(t):e[0]==="a"&&e[1]==="r"&&typeof t=="boolean"?String(t):t}var fe=Array.isArray,ue=Object.assign;function E(e,t,n,o,p){if(e==null||e===!0||e===!1||e==="")return"";if(typeof e!="object")return typeof e=="function"?"":N(e);if(fe(e)){var v="";p.__k=e;for(var d=0;d<e.length;d++)v+=E(e[d],t,n,o,p),e[d]=R(e[d]);return v}if(e.constructor!==void 0)return"";e.__=p,_.__b&&_.__b(e);var u=e.type,b=e.props;if(typeof u=="function"){var y;if(u===V)y=b.children;else{y=u.prototype&&typeof u.prototype.render=="function"?function(g,k){var i=g.type,a=q(i,k),s=new i(g.props,a);g.__c=s,s.__v=g,s.__d=!0,s.props=g.props,s.state==null&&(s.state={}),s.__s==null&&(s.__s=s.state),s.context=a,i.getDerivedStateFromProps?s.state=ue({},s.state,i.getDerivedStateFromProps(s.props,s.state)):s.componentWillMount&&(s.componentWillMount(),s.state=s.__s!==s.state?s.__s:s.state);var C=_.__r;return C&&C(g),s.render(s.props,s.state,s.context)}(e,t):function(g,k){var i,a=ve(g,k),s=q(g.type,k);g.__c=a;for(var C=_.__r,M=0;a.__d&&M++<25;)a.__d=!1,C&&C(g),i=g.type.call(a,g.props,s);return i}(e,t);var D=e.__c;D.getChildContext&&(t=ue({},t,D.getChildContext()))}var f=E(y=y!=null&&y.type===V&&y.key==null?y.props.children:y,t,n,o,e);return _.diffed&&_.diffed(e),e.__=void 0,_.unmount&&_.unmount(e),f}var c,F,m="<";if(m+=u,b)for(var h in c=b.children,b){var r=b[h];if(!(h==="key"||h==="ref"||h==="__self"||h==="__source"||h==="children"||h==="className"&&"class"in b||h==="htmlFor"&&"for"in b||Z.test(h))){if(r=Le(h=Fe(h,n),r),h==="dangerouslySetInnerHTML")F=r&&r.__html;else if(u==="textarea"&&h==="value")c=r;else if((r||r===0||r==="")&&typeof r!="function"){if(r===!0||r===""){r=h,m=m+" "+h;continue}if(h==="value"){if(u==="select"){o=r;continue}u!=="option"||o!=r||"selected"in b||(m+=" selected")}m=m+" "+h+'="'+N(r)+'"'}}}var L=m;if(m+=">",Z.test(u))throw new Error(u+" is not a valid HTML tag name in "+m);var j="",S=!1;if(F)j+=F,S=!0;else if(typeof c=="string")j+=N(c),S=!0;else if(fe(c)){e.__k=c;for(var P=0;P<c.length;P++){var w=c[P];if(c[P]=R(w),w!=null&&w!==!1){var x=E(w,t,u==="svg"||u!=="foreignObject"&&n,o,e);x&&(j+=x,S=!0)}}}else if(c!=null&&c!==!1&&c!==!0){e.__k=[R(c)];var l=E(c,t,u==="svg"||u!=="foreignObject"&&n,o,e);l&&(j+=l,S=!0)}if(_.diffed&&_.diffed(e),e.__=void 0,_.unmount&&_.unmount(e),S)m+=j;else if(pe.test(u))return L+" />";return m+"</"+u+">"}z.shallowRender=Ae;class Pe{constructor(t){te(this,"_provider");this._provider=t}render(t,n){return async o=>{var v;if(!t)throw new Error("Component is not defined");if(!o)throw new Error("Root element is not defined");const p=await((v=t.getInitialData)==null?void 0:v.call(t,n))??{};re(T(ne,{node:this._provider,...this._provider.props,children:T(t,{...n,initialData:p})}),o)}}unmount(t){if(!t)throw new Error("Root element is not defined");re(null,t)}async toString(t,n,o){var v;if(!t)throw new Error("Component is not defined");const p=await((v=t.getInitialData)==null?void 0:v.call(t,n))??{};return z(T(ne,{node:this._provider,...this._provider.props,children:T(t,{...n,initialData:p})}),{},{...o})}}const Me={Cart:{heading:"Shopping Cart"},MiniCart:{heading:"Shopping Cart ({count})",estimatedTotal:"Estimated Total",cartLink:"View Cart",checkoutLink:"Checkout"},EmptyCart:{heading:"Your cart is empty",cta:"Continue Shopping"},PriceSummary:{taxToBeDetermined:"TBD",checkout:"Checkout",estimatedShippingForm:{country:{placeholder:"Country"},state:{placeholder:"State"},zip:{placeholder:"Zip Code"},apply:{label:"Apply"}},freeShipping:"Free"},CartItem:{discountedPrice:"Discounted Price",download:"file",message:"Note",recipient:"To",regularPrice:"Regular Price",sender:"From",file:"{count} file",files:"{count} files"}},Te={Cart:Me},$e={default:Te},Ee=({children:e})=>{var v;const[t,n]=ye(),o=(v=we.getConfig())==null?void 0:v.langDefinitions;be(()=>{const d=xe.on("locale",u=>{u!==t&&n(u)},{eager:!0});return()=>{d==null||d.off()}},[t]);const p=Ce($e,o??{});return T(Oe,{lang:t,langDefinitions:p,children:e})},Xe=new Pe(T(Ee,{}));export{Xe as render};
//# sourceMappingURL=render.js.map
