import*as e from"@dropins/tools/event-bus.js";import*as t from"@dropins/tools/fetch-graphql.js";import*as r from"@dropins/tools/preact-compat.js";import*as a from"@dropins/tools/preact-hooks.js";import*as n from"@dropins/tools/preact-jsx-runtime.js";import*as i from"@dropins/tools/preact.js";export const id=261;export const ids=[261];export const modules={4304:(e,t,r)=>{r.d(t,{y:()=>_,A:()=>_});var a=r(1771),n=r(8392),i=r(1178),o=r(5444),s=r(4405),c=r(5638),l=r(8422),u=r(9145),d=["className","children","emptyCart","heading","products","estimatedTotal","ctas"];function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){var a,n,i,o;a=e,n=t,i=r[t],(n="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n))?o:String(o))in a?Object.defineProperty(a,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[n]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f=e=>{var{className:t,children:r,emptyCart:a,heading:n,products:i,estimatedTotal:m,ctas:f}=e,v=function(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(e,d),y=(0,l.FV)({estimatedTotal:"Cart.MiniCart.estimatedTotal"});return(0,u.jsxs)("div",p(p({},v),{},{className:(0,o.L)(["cart-mini-cart",t]),children:[i&&n&&(0,u.jsxs)("div",{className:"cart-mini-cart__heading",children:[(0,u.jsx)(s.a,{node:n,className:"cart-mini-cart__heading-text"}),(0,u.jsx)(c.c,{variant:"primary",className:"cart-mini-cart__heading-divider"})]}),i?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"cart-mini-cart__products",children:i}),(0,u.jsxs)("div",{className:"cart-mini-cart__footer",children:[m&&(0,u.jsxs)("div",{className:"cart-mini-cart__footer__estimated-total",children:[y.estimatedTotal,(0,u.jsx)(s.a,{node:m})]}),f&&(0,u.jsx)(s.a,{node:f,className:"cart-mini-cart__footer__ctas"})]})]}):(0,u.jsx)(s.a,{node:a,className:"cart-mini-cart__empty-cart"})]}))},v=r(5798),y=r(3386),h=r(9618),g=r(3759),j=r(7388),b=r(1144),x=r(7021),C=r(4207),O=r(9104),P=["children","initialData","routeProduct","routeCart","routeCheckout","routeEmptyCartCTA"];function k(e,t,r,a,n,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(a,n)}function w(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var i=e.apply(t,r);function o(e){k(i,a,n,o,s,"next",e)}function s(e){k(i,a,n,o,s,"throw",e)}o(void 0)}))}}function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){var a,n,i,o;a=e,n=t,i=r[t],(n="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n))?o:String(o))in a?Object.defineProperty(a,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[n]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _=e=>{var t,r,n,{children:o,initialData:s=null,routeProduct:c,routeCart:d,routeCheckout:m,routeEmptyCartCTA:p}=e,k=function(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(e,P),[w,S]=(0,a.useState)(s),[_,I]=(0,a.useState)(new Set),D=(e,t)=>{I((r=>(e?r.add(t):r.delete(t),new Set(r))))};(0,a.useEffect)((()=>{var e=i.events.on("cart/data",(e=>{S(e)}),{eager:!0});return()=>{null==e||e.off()}}),[]);var L=(0,l.FV)({cartLink:"Cart.MiniCart.cartLink",checkoutLink:"Cart.MiniCart.checkoutLink",discountedPrice:"Cart.CartItem.discountedPrice",heading:"Cart.MiniCart.heading",message:"Cart.CartItem.message",recipient:"Cart.CartItem.recipient",regularPrice:"Cart.CartItem.regularPrice",sender:"Cart.CartItem.sender",file:"Cart.CartItem.file",files:"Cart.CartItem.files"});return(0,a.useEffect)((()=>{s&&Object.keys(s).length>0&&(0,C.XV)(s,O.w.locale||"en-US")}),[s]),(0,u.jsx)(f,E(E({},k),{},{heading:(0,u.jsx)("div",{children:L.heading.replace("{count}",(null!==(t=null==w?void 0:w.totalQuantity)&&void 0!==t?t:0).toString())}),emptyCart:(0,u.jsx)(v.G,{ctaLinkURL:null==p?void 0:p()}),estimatedTotal:(null==w?void 0:w.total)&&(0,u.jsx)(y.g,{amount:null==w?void 0:w.total.value,currency:null==w?void 0:w.total.currency,style:{font:"inherit"}}),ctas:(0,u.jsxs)("div",{children:[m&&(0,u.jsx)(h.$,{variant:"primary",href:m(),children:L.checkoutLink}),d&&(0,u.jsx)(h.$,{variant:"tertiary",href:d(),children:L.cartLink})]}),products:null!==(r=null==w?void 0:w.totalQuantity)&&void 0!==r&&r?(0,u.jsx)(g.R,{children:null==w||null===(n=w.miniCartMaxItems)||void 0===n?void 0:n.map(((e,t)=>{var r,a,n,i,o,s=_.has(e.uid),l=E(E(E(E(E(E(E({},null!==(r=e.selectedOptions)&&void 0!==r?r:{}),e.recipient?{[L.recipient]:e.recipient}:{}),e.recipientEmail&&e.recipient?{[L.recipient]:"".concat(e.recipient," (").concat(e.recipientEmail,")")}:{}),e.sender?{[L.sender]:e.sender}:{}),e.senderEmail&&e.sender?{[L.sender]:"".concat(e.sender," (").concat(e.senderEmail,")")}:{}),e.message?{[L.message]:e.message}:{}),e.links&&e.links.count?e.links.count>1?{[L.files.replace("{count}",e.links.count.toString())]:e.links.result}:{[L.file.replace("{count}",e.links.count.toString())]:e.links.result}:{});return(0,u.jsx)(j.m,{"data-testid":"cart-item",updating:s,image:c?(0,u.jsx)("a",{href:c(e),children:(0,u.jsx)(b._,{loading:t<4?"eager":"lazy",src:e.image.src,alt:e.image.alt,width:"300",height:"300",params:{width:300}})}):(0,u.jsx)(b._,{loading:t<4?"eager":"lazy",src:e.image.src,alt:e.image.alt,width:"300",height:"300",params:{width:300}}),title:(0,u.jsx)("span",{children:c?(0,u.jsx)("a",{href:c(e),children:e.name}):e.name}),sku:(0,u.jsx)("span",{children:e.sku}),configurations:Object.keys(l).length>0?l:void 0,quantity:e.quantity,price:(0,u.jsx)(y.g,{amount:null===(a=e.regularPrice)||void 0===a?void 0:a.value,currency:null===(n=e.regularPrice)||void 0===n?void 0:n.currency,weight:"normal"}),total:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(y.g,{amount:e.total.value,currency:e.total.currency,variant:e.discounted?"strikethrough":"default","data-testid":"regular-total","aria-label":L.regularPrice}),e.discounted&&(0,u.jsx)(y.g,{amount:null===(i=e.discountedTotal)||void 0===i?void 0:i.value,currency:null===(o=e.discountedTotal)||void 0===o?void 0:o.currency,sale:e.discounted,"data-testid":"discount-total","aria-label":L.discountedPrice})]}),onRemove:()=>{var t;t=e.uid,D(!0,t),(0,x.e)([{uid:t,quantity:0}]).finally((()=>{D(!1,t)}))}},e.uid)}))}):void 0}))};_.getInitialData=w((function*(){return(0,n.Y)()}))},1178:(t,r,a)=>{var n,i;t.exports=(n={events:()=>e.events},i={},a.d(i,n),i)},5867:(e,r,a)=>{var n,i;e.exports=(n={FetchGraphQL:()=>t.FetchGraphQL},i={},a.d(i,n),i)},1771:(e,t,a)=>{var n,i;e.exports=(n={Children:()=>r.Children,Suspense:()=>r.Suspense,createContext:()=>r.createContext,lazy:()=>r.lazy,useCallback:()=>r.useCallback,useContext:()=>r.useContext,useEffect:()=>r.useEffect,useMemo:()=>r.useMemo,useRef:()=>r.useRef,useState:()=>r.useState},i={},a.d(i,n),i)},2885:(e,t,r)=>{var n,i;e.exports=(n={useCallback:()=>a.useCallback,useContext:()=>a.useContext,useDebugValue:()=>a.useDebugValue,useEffect:()=>a.useEffect,useId:()=>a.useId,useImperativeHandle:()=>a.useImperativeHandle,useLayoutEffect:()=>a.useLayoutEffect,useMemo:()=>a.useMemo,useReducer:()=>a.useReducer,useRef:()=>a.useRef,useState:()=>a.useState},i={},r.d(i,n),i)},997:(e,t,r)=>{var a,i;e.exports=(a={Fragment:()=>n.Fragment,jsx:()=>n.jsx,jsxs:()=>n.jsxs},i={},r.d(i,a),i)},7706:(e,t,r)=>{var a,n;e.exports=(a={Component:()=>i.Component,Fragment:()=>i.Fragment,cloneElement:()=>i.cloneElement,createContext:()=>i.createContext,createElement:()=>i.createElement,createRef:()=>i.createRef,h:()=>i.h,hydrate:()=>i.hydrate,options:()=>i.options,render:()=>i.render,toChildArray:()=>i.toChildArray},n={},r.d(n,a),n)}};import o from"../runtime.js";import*as s from"../383.js";o.C(s);import*as c from"../36.js";o.C(c);import*as l from"../208.js";o.C(l);import*as u from"./MiniCart.js";o.C(u);var d=(4304,o(o.s=4304)),m=d.y,p=d.A;export{m as MiniCart,p as default};